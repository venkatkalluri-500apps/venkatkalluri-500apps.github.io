(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ninjacapture50"],{"4de4":function(e,t,r){"use strict";var n=r("23e7"),_=r("b727").filter,a=r("1dde"),i=r("ae40"),o=a("filter"),c=i("filter");n({target:"Array",proto:!0,forced:!o||!c},{filter:function(e){return _(this,e,arguments.length>1?arguments[1]:void 0)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var n=r("1d80"),_=r("5899"),a="["+_+"]",i=RegExp("^"+a+a+"*"),o=RegExp(a+a+"*$"),c=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(i,"")),2&e&&(r=r.replace(o,"")),r}};e.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(e,t,r){var n=r("861d"),_=r("d2bb");e.exports=function(e,t,r){var a,i;return _&&"function"==typeof(a=t.constructor)&&a!==r&&n(i=a.prototype)&&i!==r.prototype&&_(e,i),e}},"8c65":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){try{return encodeURIComponent(e)}catch(t){console.error("error encode %o")}return null},_=function(e){try{return decodeURIComponent(e)}catch(t){console.error("error decode %o")}return null},a=function(e){return n(e).replace(/[\-\.\+\*]/g,"\\$&")},i={getItem:function(e){return e&&_(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+a(e)+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,r,_,a,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var o="";if(r)switch(r.constructor){case Number:o=r===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+r;break;case String:o="; expires="+r;break;case Date:o="; expires="+r.toUTCString();break;default:break}return document.cookie=[n(e),"=",n(t),o,a?"; domain="+a:"",_?"; path="+_:"",i?"; secure":""].join(""),!0},removeItem:function(e,t,r){return!!this.hasItem(e)&&(document.cookie=[n(e),"=; expires=Thu, 01 Jan 1970 00:00:00 GMT",r?"; domain="+r:"",t?"; path="+t:""].join(""),!0)},hasItem:function(e){return!!e&&new RegExp("(?:^|;\\s*)"+n(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);return e=e.map((function(e){return _(e)})),e}};t.default=i},"8d0d":function(e,t,r){"use strict";r("ade0")},"9b7b":function(e,t,r){"use strict";r("96cf");var n=r("c964"),_=r("276c"),a=r("e954"),i=r("8c65"),o=r.n(i);function c(e){this.message=e}c.prototype=new Error,c.prototype.name="InvalidCharacterError";var s="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new c("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,_=0,a=0,i="";n=t.charAt(a++);~n&&(r=_%4?64*r+n:n,_++%4)?i+=String.fromCharCode(255&r>>(-2*_&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return i};function u(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(s(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return s(t)}}function l(e){this.message=e}function p(e,t){if("string"!=typeof e)throw new l("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(u(e.split(".")[r]))}catch(e){throw new l("Invalid token specified: "+e.message)}}l.prototype=new Error,l.prototype.name="InvalidTokenError";var d=p,f=function(){function e(){Object(_["a"])(this,e)}return Object(a["a"])(e,[{key:"getJWT",value:function(){var e=o.a.getItem("token")||localStorage.getItem("token");if(e)try{var t=JSON.parse(e);this.jwt_token=d(t.jwt);var r="Bearer ".concat(t.jwt);return r}catch(n){return e}}},{key:"setHeader",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getJWT();case 2:return t=e.sent,r={},r["Authorization"]=t,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getJWTDecoded",value:function(){var e=this.getJWT();if(e)return d(e)}}]),e}();t["a"]=new f},a9e3:function(e,t,r){"use strict";var n=r("83ab"),_=r("da84"),a=r("94ca"),i=r("6eeb"),o=r("5135"),c=r("c6b6"),s=r("7156"),u=r("c04e"),l=r("d039"),p=r("7c73"),d=r("241c").f,f=r("06cf").f,b=r("9bf2").f,m=r("58a8").trim,h="Number",g=_[h],E=g.prototype,P=c(p(E))==h,O=function(e){var t,r,n,_,a,i,o,c,s=u(e,!1);if("string"==typeof s&&s.length>2)if(s=m(s),t=s.charCodeAt(0),43===t||45===t){if(r=s.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(s.charCodeAt(1)){case 66:case 98:n=2,_=49;break;case 79:case 111:n=8,_=55;break;default:return+s}for(a=s.slice(2),i=a.length,o=0;o<i;o++)if(c=a.charCodeAt(o),c<48||c>_)return NaN;return parseInt(a,n)}return+s};if(a(h,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var v,x=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof x&&(P?l((function(){E.valueOf.call(r)})):c(r)!=h)?s(new g(O(t)),r,x):O(t)},y=n?d(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),D=0;y.length>D;D++)o(g,v=y[D])&&!o(x,v)&&b(x,v,f(g,v));x.prototype=E,E.constructor=x,i(_,h,x)}},ade0:function(e,t,r){},d4c9:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("99af"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0__),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("96cf"),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_1__),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("c964"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("276c"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("e954"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("920b"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("92a6"),_core_data__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("a11a"),axios__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_8__),_jwt__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("9b7b"),server_url="https://api.${region}.500apps.com/pbxplus/v1/node/users",transfer_url="https://api.${region}.500apps.com/voxdesk/v1/transfer/${call_type}/outbound/${callsid}/${callType}/${number}",conference_url="https://api.${region}.500apps.com/voxdesk/",Conference=function(_Data){Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__["a"])(Conference,_Data);var _super=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_6__["a"])(Conference);function Conference(){return Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__["a"])(this,Conference),_super.apply(this,arguments)}return Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__["a"])(Conference,[{key:"getAgents",value:function(){var _getAgents=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["a"])(regeneratorRuntime.mark((function _callee(){var headers,region,url,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context.sent,region=this.getRegion(),url=server_url,url=eval("`"+url+"`"),_context.next=8,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get(url,{headers:headers});case 8:return response=_context.sent,_context.abrupt("return",response.data);case 10:case"end":return _context.stop()}}),_callee,this)})));function getAgents(){return _getAgents.apply(this,arguments)}return getAgents}()},{key:"transferCall",value:function(){var _transferCall=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["a"])(regeneratorRuntime.mark((function _callee2(callsid,call_type,callType,number){var headers,region,url;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context2.sent,region=this.getRegion(),url=transfer_url,url=eval("`"+url+"`"),_context2.next=8,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get(url,{headers:headers});case 8:case"end":return _context2.stop()}}),_callee2,this)})));function transferCall(e,t,r,n){return _transferCall.apply(this,arguments)}return transferCall}()},{key:"debounce",value:function(e,t){var r=null;return function(){clearTimeout(r);var n=arguments,_=this;r=setTimeout((function(){e.apply(_,n)}),t)}}},{key:"getParticipants",value:function(){var _getParticipants=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["a"])(regeneratorRuntime.mark((function _callee3(conference_sid,twilioConfig){var headers,region,url,response;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context3.sent,region=this.getRegion(),url=conference_url+"conference/participants?conference_sid=".concat(conference_sid,"&account_sid=").concat(twilioConfig.ACCOUNT_SID,"&auth_token=").concat(twilioConfig.AUTH_TOKEN),url=eval("`"+url+"`"),_context3.next=8,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get(url,{headers:headers});case 8:return response=_context3.sent,_context3.abrupt("return",response.data);case 10:case"end":return _context3.stop()}}),_callee3,this)})));function getParticipants(e,t){return _getParticipants.apply(this,arguments)}return getParticipants}()},{key:"addParticipant",value:function(){var _addParticipant=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["a"])(regeneratorRuntime.mark((function _callee4(conference_sid,body){var headers,region,url,response;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context4.sent,region=this.getRegion(),url=conference_url+"conference/participant?conference_sid=".concat(conference_sid),url=eval("`"+url+"`"),_context4.next=8,axios__WEBPACK_IMPORTED_MODULE_8___default.a.post(url,body,{headers:headers});case 8:return response=_context4.sent,_context4.abrupt("return",response.data);case 10:case"end":return _context4.stop()}}),_callee4,this)})));function addParticipant(e,t){return _addParticipant.apply(this,arguments)}return addParticipant}()},{key:"updateParticipant",value:function(){var _updateParticipant=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["a"])(regeneratorRuntime.mark((function _callee5(conference_sid,call_sid,action,body){var headers,region,url,response;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context5.sent,region=this.getRegion(),url=conference_url+"conference/participant?conference_sid=".concat(conference_sid,"&call_sid=").concat(call_sid).concat(action),url=eval("`"+url+"`"),_context5.next=8,axios__WEBPACK_IMPORTED_MODULE_8___default.a.put(url,body,{headers:headers});case 8:return response=_context5.sent,_context5.abrupt("return",response.data);case 10:case"end":return _context5.stop()}}),_callee5,this)})));function updateParticipant(e,t,r,n){return _updateParticipant.apply(this,arguments)}return updateParticipant}()}]),Conference}(_core_data__WEBPACK_IMPORTED_MODULE_7__["a"]);__webpack_exports__["a"]=new Conference},dbb4:function(e,t,r){var n=r("23e7"),_=r("83ab"),a=r("56ef"),i=r("fc6a"),o=r("06cf"),c=r("8418");n({target:"Object",stat:!0,sham:!_},{getOwnPropertyDescriptors:function(e){var t,r,n=i(e),_=o.f,s=a(n),u={},l=0;while(s.length>l)r=_(n,t=s[l++]),void 0!==r&&c(u,t,r);return u}})},f3f3:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");var n=r("fc11");function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},fc11:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return n}))},fe13:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"position-relative"},[r("b-form-input",{attrs:{size:"sm",placeholder:"Enter phone number",disabled:"Calling"==e.message},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.conference_call(e.phone_number)}},model:{value:e.phone_number,callback:function(t){e.phone_number=t},expression:"phone_number"}}),r("span",{class:"font-size-12px "+("Calling"==e.message?"text-primary text-right":"text-danger text-right")},[e._v(e._s(e.message))]),r("b-overlay",{staticClass:"position-unset",attrs:{show:e.isLoading,"spinner-variant":"primary","spinner-small":""}}),!e.isLoading&&e.participants.length>0?r("b-table",{ref:"conference_list_table",staticClass:"mb-0 mt-2 conference-th",attrs:{fixed:"",responsive:"",small:"",fields:e.fields,items:e.participants},scopedSlots:e._u([{key:"cell(actions)",fn:function(t){return[r("div",{staticClass:"d-flex align-items-center justify-content-end"},[r("b-link",{staticClass:"cursor-pointer mr-3",attrs:{title:Boolean(e.participants[t.index].muted)?"Mute":"Unmute"},on:{click:function(r){return e.updateParticipant(t.item,t.index,"muted")}}},[r("i",{class:Boolean(e.participants[t.index].muted)?"fe fe-mic-off text-danger":"fe fe-mic text-primary"})]),r("b-link",{staticClass:"cursor-pointer mr-3",attrs:{title:"Hold"},on:{click:function(r){return e.updateParticipant(t.item,t.index,"hold")}}},[r("i",{class:Boolean(e.participants[t.index].hold)?"fe fe-pause-circle text-danger":"fe fe-pause-circle text-primary"})]),r("b-link",{staticClass:"cursor-pointer mr-3",attrs:{title:"End Call"},on:{click:function(r){return e.updateParticipant(t.item,t.index,"hangup")}}},[r("i",{staticClass:"fe fe-phone text-danger"})])],1)]}}],null,!1,982806962)}):e._e()],1)},_=[],a=(r("99af"),r("a9e3"),r("f3f3")),i=(r("96cf"),r("c964")),o=r("d4c9"),c={props:{participants:Array,conference_sid:String,twilioConfig:Object,isLoading:Boolean,from_number:Number},data:function(){return{phone_number:"",conference_name:"",users:[],fields:[{label:"Number",key:"phone_number"},{label:"",key:"actions"}],message:""}},methods:{conference_call:function(e){var t=arguments,r=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var _,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return _=t.length>1&&void 0!==t[1]?t[1]:"number",r.message="Calling",i={to_number:e,call_type:_,from_number:r.from_number},i=Object(a["a"])(Object(a["a"])({},i),r.twilioConfig),n.prev=4,n.next=7,o["a"].addParticipant(r.conference_sid,i);case 7:c=n.sent,c.type="add",r.phone_number="",r.message="",r.$emit("updateParticipants",c),n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](4),r.message="Failed to call";case 17:case"end":return n.stop()}}),n,null,[[4,14]])})))()},updateParticipant:function(e,t,r){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function _(){var a,i,c;return regeneratorRuntime.wrap((function(_){while(1)switch(_.prev=_.next){case 0:return a=Boolean(n.participants[t][r]),i="&".concat(r,"=").concat(!a),_.next=4,o["a"].updateParticipant(n.conference_sid,e.call_sid,i,n.twilioConfig);case 4:c=_.sent,c.type="update","hangup"==r&&(c.type="delete"),c.index=t,n.$emit("updateParticipants",c);case 9:case"end":return _.stop()}}),_)})))()}}},s=c,u=(r("8d0d"),r("2877")),l=Object(u["a"])(s,n,_,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=ninjacapture50.0cb1d44e.js.map