(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ninjacapture46"],{5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var _=r("1d80"),n=r("5899"),a="["+n+"]",o=RegExp("^"+a+a+"*"),s=RegExp(a+a+"*$"),i=function(e){return function(t){var r=String(_(t));return 1&e&&(r=r.replace(o,"")),2&e&&(r=r.replace(s,"")),r}};e.exports={start:i(1),end:i(2),trim:i(3)}},7156:function(e,t,r){var _=r("861d"),n=r("d2bb");e.exports=function(e,t,r){var a,o;return n&&"function"==typeof(a=t.constructor)&&a!==r&&_(o=a.prototype)&&o!==r.prototype&&n(e,o),e}},8502:function(e,t,r){"use strict";r.r(t);var _=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.connection?[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.showtypes",modifiers:{showtypes:!0}}],staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){e.show_transfer_call=!e.show_transfer_call}}},[r("span",{staticClass:"fe fe-phone-forwarded"}),r("small",[e._v("Transfer")])])]:e._e(),e.show_transfer_call?r("b-modal",{attrs:{size:"sm",id:"showtypes","body-class":"p-0","hide-footer":"","hide-header":""}},[r("div",{staticClass:"p-3 m-2 d-flex align-items-center"},[r("b-button-group",{staticClass:"w-100"},[r("b-button",{attrs:{size:"sm",variant:"warm"==e.call_type?"primary":"white"},on:{click:function(t){e.call_type="warm",e.show_agents=!0}}},[r("div",{staticClass:"d-flex align-items-center justify-content-center"},[r("i",{staticClass:"fe fe-sun mr-2"}),r("p",{staticClass:"mb-0 text"},[e._v("Warm")])])]),r("b-button",{attrs:{size:"sm",variant:"cold"==e.call_type?"primary":"white"},on:{click:function(t){e.call_type="cold",e.show_agents=!0}}},[r("div",{staticClass:"d-flex align-items-center justify-content-center"},[r("i",{staticClass:"fe fe-moon mr-2"}),r("p",{staticClass:"mb-0 text"},[e._v("Cold")])])])],1)],1),e.show_agents&&e.show_transfer_call?r("div",{staticClass:"px-3 mx-2 mb-2 pb-3"},[r("b-form-input",{staticClass:"font-weight-normal h3 mb-0 text-center",attrs:{size:"sm",placeholder:"Enter phone number"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.transferCall(e.phone_number)}},model:{value:e.phone_number,callback:function(t){e.phone_number=t},expression:"phone_number"}}),r("div",{staticClass:"d-flex flex-nowrap align-items-center my-2"},[r("span",{staticClass:"border-top w-50"}),r("span",{staticClass:"small px-3 "},[e._v("OR")]),r("span",{staticClass:"border-top w-50"})]),r("b-dropdown",{attrs:{block:"",id:"agents_list",text:"Agents",variant:"white",size:"sm","toggle-class":"rounded-top-0 d-flex justify-content-between align-items-center"}},e._l(e.users,(function(t,_){return r("b-dropdown-item",{key:_,on:{click:function(r){return e.transferCall("PBX_"+e.domain_id+"_"+t.domain_user_id,"client")}}},[e._v(e._s(t.user_name))])})),1),r("b-overlay",{attrs:{show:e.isBusy,"no-wrap":"",opacity:"0.5"}})],1):e._e()]):e._e()],2)},n=[],a=(r("a9e3"),r("96cf"),r("c964")),o=r("d4c9"),s={props:{connection:Object,domain_id:Number},data:function(){return{users:[],show_transfer_call:!1,show_agents:!1,call_type:"",phone_number:"",isBusy:!1}},mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].getAgents();case 2:this.users=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{transferCall:function(e){var t=arguments,r=this;return Object(a["a"])(regeneratorRuntime.mark((function _(){var n;return regeneratorRuntime.wrap((function(_){while(1)switch(_.prev=_.next){case 0:return n=t.length>1&&void 0!==t[1]?t[1]:"number",r.isBusy=!0,_.next=4,o["a"].transferCall(r.connection.parameters.CallSid,r.call_type,n,e);case 4:r.phone_number="",r.isBusy=!1,r.$bvModal.hide("showtypes");case 7:case"end":return _.stop()}}),_)})))()}}},i=s,c=r("2877"),u=Object(c["a"])(i,_,n,!1,null,null,null);t["default"]=u.exports},"8c65":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var _=function(e){try{return encodeURIComponent(e)}catch(t){console.error("error encode %o")}return null},n=function(e){try{return decodeURIComponent(e)}catch(t){console.error("error decode %o")}return null},a=function(e){return _(e).replace(/[\-\.\+\*]/g,"\\$&")},o={getItem:function(e){return e&&n(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+a(e)+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,r,n,a,o){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var s="";if(r)switch(r.constructor){case Number:s=r===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+r;break;case String:s="; expires="+r;break;case Date:s="; expires="+r.toUTCString();break;default:break}return document.cookie=[_(e),"=",_(t),s,a?"; domain="+a:"",n?"; path="+n:"",o?"; secure":""].join(""),!0},removeItem:function(e,t,r){return!!this.hasItem(e)&&(document.cookie=[_(e),"=; expires=Thu, 01 Jan 1970 00:00:00 GMT",r?"; domain="+r:"",t?"; path="+t:""].join(""),!0)},hasItem:function(e){return!!e&&new RegExp("(?:^|;\\s*)"+_(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);return e=e.map((function(e){return n(e)})),e}};t.default=o},"9b7b":function(e,t,r){"use strict";r("96cf");var _=r("c964"),n=r("276c"),a=r("e954"),o=r("8c65"),s=r.n(o);function i(e){this.message=e}i.prototype=new Error,i.prototype.name="InvalidCharacterError";var c="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,_,n=0,a=0,o="";_=t.charAt(a++);~_&&(r=n%4?64*r+_:_,n++%4)?o+=String.fromCharCode(255&r>>(-2*n&6)):0)_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(_);return o};function u(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(c(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return c(t)}}function l(e){this.message=e}function p(e,t){if("string"!=typeof e)throw new l("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(u(e.split(".")[r]))}catch(e){throw new l("Invalid token specified: "+e.message)}}l.prototype=new Error,l.prototype.name="InvalidTokenError";var d=p,f=function(){function e(){Object(n["a"])(this,e)}return Object(a["a"])(e,[{key:"getJWT",value:function(){var e=s.a.getItem("token")||localStorage.getItem("token");if(e)try{var t=JSON.parse(e);this.jwt_token=d(t.jwt);var r="Bearer ".concat(t.jwt);return r}catch(_){return e}}},{key:"setHeader",value:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getJWT();case 2:return t=e.sent,r={},r["Authorization"]=t,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getJWTDecoded",value:function(){var e=this.getJWT();if(e)return d(e)}}]),e}();t["a"]=new f},a9e3:function(e,t,r){"use strict";var _=r("83ab"),n=r("da84"),a=r("94ca"),o=r("6eeb"),s=r("5135"),i=r("c6b6"),c=r("7156"),u=r("c04e"),l=r("d039"),p=r("7c73"),d=r("241c").f,f=r("06cf").f,b=r("9bf2").f,m=r("58a8").trim,h="Number",g=n[h],E=g.prototype,v=i(p(E))==h,w=function(e){var t,r,_,n,a,o,s,i,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=m(c),t=c.charCodeAt(0),43===t||45===t){if(r=c.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:_=2,n=49;break;case 79:case 111:_=8,n=55;break;default:return+c}for(a=c.slice(2),o=a.length,s=0;s<o;s++)if(i=a.charCodeAt(s),i<48||i>n)return NaN;return parseInt(a,_)}return+c};if(a(h,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var x,P=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof P&&(v?l((function(){E.valueOf.call(r)})):i(r)!=h)?c(new g(w(t)),r,P):w(t)},y=_?d(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),O=0;y.length>O;O++)s(g,x=y[O])&&!s(P,x)&&b(P,x,f(g,x));P.prototype=E,E.constructor=P,o(n,h,P)}},d4c9:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("99af"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0__),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("96cf"),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_1__),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("c964"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("276c"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("e954"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("920b"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("92a6"),_core_data__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("a11a"),axios__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_8__),_jwt__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("9b7b"),server_url="https://api.${region}.500apps.com/pbxplus/v1/node/users",transfer_url="https://api.${region}.500apps.com/voxdesk/v1/transfer/${call_type}/outbound/${callsid}/${callType}/${number}",conference_url="https://api.${region}.500apps.com/voxdesk/",Conference=function(_Data){Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__["a"])(Conference,_Data);var _super=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_6__["a"])(Conference);function Conference(){return Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__["a"])(this,Conference),_super.apply(this,arguments)}return Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__["a"])(Conference,[{key:"getAgents",value:function(){var _getAgents=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["a"])(regeneratorRuntime.mark((function _callee(){var headers,region,url,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context.sent,region=this.getRegion(),url=server_url,url=eval("`"+url+"`"),_context.next=8,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get(url,{headers:headers});case 8:return response=_context.sent,_context.abrupt("return",response.data);case 10:case"end":return _context.stop()}}),_callee,this)})));function getAgents(){return _getAgents.apply(this,arguments)}return getAgents}()},{key:"transferCall",value:function(){var _transferCall=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["a"])(regeneratorRuntime.mark((function _callee2(callsid,call_type,callType,number){var headers,region,url;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context2.sent,region=this.getRegion(),url=transfer_url,url=eval("`"+url+"`"),_context2.next=8,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get(url,{headers:headers});case 8:case"end":return _context2.stop()}}),_callee2,this)})));function transferCall(e,t,r,_){return _transferCall.apply(this,arguments)}return transferCall}()},{key:"debounce",value:function(e,t){var r=null;return function(){clearTimeout(r);var _=arguments,n=this;r=setTimeout((function(){e.apply(n,_)}),t)}}},{key:"getParticipants",value:function(){var _getParticipants=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["a"])(regeneratorRuntime.mark((function _callee3(conference_sid,twilioConfig){var headers,region,url,response;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context3.sent,region=this.getRegion(),url=conference_url+"conference/participants?conference_sid=".concat(conference_sid,"&account_sid=").concat(twilioConfig.ACCOUNT_SID,"&auth_token=").concat(twilioConfig.AUTH_TOKEN),url=eval("`"+url+"`"),_context3.next=8,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get(url,{headers:headers});case 8:return response=_context3.sent,_context3.abrupt("return",response.data);case 10:case"end":return _context3.stop()}}),_callee3,this)})));function getParticipants(e,t){return _getParticipants.apply(this,arguments)}return getParticipants}()},{key:"addParticipant",value:function(){var _addParticipant=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["a"])(regeneratorRuntime.mark((function _callee4(conference_sid,body){var headers,region,url,response;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context4.sent,region=this.getRegion(),url=conference_url+"conference/participant?conference_sid=".concat(conference_sid),url=eval("`"+url+"`"),_context4.next=8,axios__WEBPACK_IMPORTED_MODULE_8___default.a.post(url,body,{headers:headers});case 8:return response=_context4.sent,_context4.abrupt("return",response.data);case 10:case"end":return _context4.stop()}}),_callee4,this)})));function addParticipant(e,t){return _addParticipant.apply(this,arguments)}return addParticipant}()},{key:"updateParticipant",value:function(){var _updateParticipant=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["a"])(regeneratorRuntime.mark((function _callee5(conference_sid,call_sid,action,body){var headers,region,url,response;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context5.sent,region=this.getRegion(),url=conference_url+"conference/participant?conference_sid=".concat(conference_sid,"&call_sid=").concat(call_sid).concat(action),url=eval("`"+url+"`"),_context5.next=8,axios__WEBPACK_IMPORTED_MODULE_8___default.a.put(url,body,{headers:headers});case 8:return response=_context5.sent,_context5.abrupt("return",response.data);case 10:case"end":return _context5.stop()}}),_callee5,this)})));function updateParticipant(e,t,r,_){return _updateParticipant.apply(this,arguments)}return updateParticipant}()}]),Conference}(_core_data__WEBPACK_IMPORTED_MODULE_7__["a"]);__webpack_exports__["a"]=new Conference}}]);
//# sourceMappingURL=ninjacapture46.d6ab06f9.js.map