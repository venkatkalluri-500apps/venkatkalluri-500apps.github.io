(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ninjacapture44"],{"27fe":function(e,_,t){"use strict";t.r(_);var r=function(){var e=this,_=e.$createElement,t=e._self._c||_;return e.connection?t("div",[e.connection?t("b-button",{class:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number justify-content-center "+(e.disablePlayButton?"voxdesk-btn-disabled":""),attrs:{variant:"transparent",block:"",disabled:!e.voice_mail||e.disablePlayButton},on:{click:function(_){e.show_messages=!e.show_messages,e.is_playing_message=!e.is_playing_message}}},[t("i",{class:"fe "+(e.is_playing_message?"fe-play-circle":"fe-stop-circle text-danger")}),e.is_playing_message?t("small",[e._v("Play")]):t("small",{staticClass:"text-danger"},[e._v("Stop")])]):e._e(),e.show_messages?t("div",{staticClass:"audio position-absolute"},e._l(e.files,(function(_,r){return t("div",{key:r},[t("div",{staticClass:"card-body"},[t("p",[e._v(e._s(_.name))]),t("audio",{staticClass:"height-40",attrs:{controls:"controls",src:_.key}})])])})),0):e._e()],1):e._e()},n=[],a=(t("99af"),t("4160"),t("b0c0"),t("ac1f"),t("1276"),t("159b"),t("96cf"),t("c964")),i=t("2cfc"),o={props:{connection:Object,disablePlayButton:Boolean},data:function(){return{show_messages:!1,files:[],is_playing_message:!0}},mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var _;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].getRegion();case 2:return _=e.sent,e.next=5,i["a"].getMedia();case 5:this.files=e.sent,this.files.forEach((function(e){e.name=e.key.split("pbxplus/")[1],e.key="https://ap1-".concat(_,"-infinity-user-data.s3.amazonaws.com/").concat(e.key)}));case 7:case"end":return e.stop()}}),e,this)})));function _(){return e.apply(this,arguments)}return _}()},s=o,c=(t("7f9c"),t("2877")),u=Object(c["a"])(s,r,n,!1,null,"64506390",null);_["default"]=u.exports},"2cfc":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("99af"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("7db0"),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_1__),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("96cf"),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_2__),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("c964"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("276c"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("e954"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("920b"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("92a6"),axios__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_8__),_jwt__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("9b7b"),_core_data__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("a11a"),User_Server="https://api.${region}.500apps.com/auth/v1/users/domain_user_details?limit=50",Server="https://api.${region}.500apps.com/pbxplus/v1",Agent_Capability="https://pref.${region}.500apps.com/v2/app_pref?where=app_name='${app_name}' and pref_key='twilioDialer'",Voicemail_Server="https://api.${region}.500apps.com/voxdesk/v1/voicemail-drop/${callsid}?audio_url=${audio_url}",Media_Server="https://api.${region}.500apps.com/files/?app=pbxplus&limit=50",DialerData=function(_Data){Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__["a"])(DialerData,_Data);var _super=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_7__["a"])(DialerData);function DialerData(){return Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__["a"])(this,DialerData),_super.apply(this,arguments)}return Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__["a"])(DialerData,[{key:"getProfile",value:function(){var _getProfile=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["a"])(regeneratorRuntime.mark((function _callee(){var headers,region,url,result,decoded,current_user;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context.sent,region=this.getRegion(),url=eval("`"+User_Server+"`"),_context.next=7,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get(url,{headers:headers});case 7:if(result=_context.sent,decoded=_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].getJWTDecoded(),decoded){_context.next=11;break}return _context.abrupt("return","");case 11:return current_user=result.data.find((function(e){return e.email==decoded.email})),_context.abrupt("return",current_user);case 13:case"end":return _context.stop()}}),_callee,this)})));function getProfile(){return _getProfile.apply(this,arguments)}return getProfile}()},{key:"getCapabilityVisitor",value:function(){var _getCapabilityVisitor=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["a"])(regeneratorRuntime.mark((function _callee2(domain_id,callflow_id,api_key){var region,url,result;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return region=this.getRegion(),url=eval("`"+Server+"`"),_context2.next=4,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get("".concat(url,"/c2c/").concat(domain_id,"/").concat(callflow_id,"/").concat(api_key));case 4:return result=_context2.sent,_context2.abrupt("return",result.data);case 6:case"end":return _context2.stop()}}),_callee2,this)})));function getCapabilityVisitor(e,_,t){return _getCapabilityVisitor.apply(this,arguments)}return getCapabilityVisitor}()},{key:"getCapabilityAgent",value:function(){var _getCapabilityAgent=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["a"])(regeneratorRuntime.mark((function _callee3(app_name){var headers,region,url,result;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context3.sent,region=this.getRegion(),url=eval("`"+Agent_Capability+"`"),_context3.next=7,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get("".concat(url),{headers:headers});case 7:return result=_context3.sent,_context3.abrupt("return",result.data[0]);case 9:case"end":return _context3.stop()}}),_callee3,this)})));function getCapabilityAgent(e){return _getCapabilityAgent.apply(this,arguments)}return getCapabilityAgent}()},{key:"sendVoicemail",value:function(){var _sendVoicemail=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["a"])(regeneratorRuntime.mark((function _callee4(callsid,audio_url){var headers,region,url,result;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context4.sent,region=this.getRegion(),url=eval("`"+Voicemail_Server+"`"),_context4.next=7,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get("".concat(url),{headers:headers});case 7:return result=_context4.sent,_context4.abrupt("return",result);case 9:case"end":return _context4.stop()}}),_callee4,this)})));function sendVoicemail(e,_){return _sendVoicemail.apply(this,arguments)}return sendVoicemail}()},{key:"getMedia",value:function(){var _getMedia=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["a"])(regeneratorRuntime.mark((function _callee5(){var headers,region,url,result;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context5.sent,region=this.getRegion(),url=eval("`"+Media_Server+"`"),_context5.next=7,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get("".concat(url),{headers:headers});case 7:return result=_context5.sent,_context5.abrupt("return",result.data);case 9:case"end":return _context5.stop()}}),_callee5,this)})));function getMedia(){return _getMedia.apply(this,arguments)}return getMedia}()}]),DialerData}(_core_data__WEBPACK_IMPORTED_MODULE_10__["a"]);__webpack_exports__["a"]=new DialerData},"6e1d":function(e,_,t){},"7db0":function(e,_,t){"use strict";var r=t("23e7"),n=t("b727").find,a=t("44d2"),i=t("ae40"),o="find",s=!0,c=i(o);o in[]&&Array(1)[o]((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!c},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),a(o)},"7f9c":function(e,_,t){"use strict";t("6e1d")},"8c65":function(e,_,t){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var r=function(e){try{return encodeURIComponent(e)}catch(_){console.error("error encode %o")}return null},n=function(e){try{return decodeURIComponent(e)}catch(_){console.error("error decode %o")}return null},a=function(e){return r(e).replace(/[\-\.\+\*]/g,"\\$&")},i={getItem:function(e){return e&&n(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+a(e)+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,_,t,n,a,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var o="";if(t)switch(t.constructor){case Number:o=t===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+t;break;case String:o="; expires="+t;break;case Date:o="; expires="+t.toUTCString();break;default:break}return document.cookie=[r(e),"=",r(_),o,a?"; domain="+a:"",n?"; path="+n:"",i?"; secure":""].join(""),!0},removeItem:function(e,_,t){return!!this.hasItem(e)&&(document.cookie=[r(e),"=; expires=Thu, 01 Jan 1970 00:00:00 GMT",t?"; domain="+t:"",_?"; path="+_:""].join(""),!0)},hasItem:function(e){return!!e&&new RegExp("(?:^|;\\s*)"+r(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);return e=e.map((function(e){return n(e)})),e}};_.default=i},"9b7b":function(e,_,t){"use strict";t("96cf");var r=t("c964"),n=t("276c"),a=t("e954"),i=t("8c65"),o=t.n(i);function s(e){this.message=e}s.prototype=new Error,s.prototype.name="InvalidCharacterError";var c="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var _=String(e).replace(/=+$/,"");if(_.length%4==1)throw new s("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,r,n=0,a=0,i="";r=_.charAt(a++);~r&&(t=n%4?64*t+r:r,n++%4)?i+=String.fromCharCode(255&t>>(-2*n&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return i};function u(e){var _=e.replace(/-/g,"+").replace(/_/g,"/");switch(_.length%4){case 0:break;case 2:_+="==";break;case 3:_+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(c(e).replace(/(.)/g,(function(e,_){var t=_.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t})))}(_)}catch(e){return c(_)}}function l(e){this.message=e}function p(e,_){if("string"!=typeof e)throw new l("Invalid token specified");var t=!0===(_=_||{}).header?0:1;try{return JSON.parse(u(e.split(".")[t]))}catch(e){throw new l("Invalid token specified: "+e.message)}}l.prototype=new Error,l.prototype.name="InvalidTokenError";var d=p,b=function(){function e(){Object(n["a"])(this,e)}return Object(a["a"])(e,[{key:"getJWT",value:function(){var e=o.a.getItem("token")||localStorage.getItem("token");if(e)try{var _=JSON.parse(e);this.jwt_token=d(_.jwt);var t="Bearer ".concat(_.jwt);return t}catch(r){return e}}},{key:"setHeader",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var _,t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getJWT();case 2:return _=e.sent,t={},t["Authorization"]=_,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));function _(){return e.apply(this,arguments)}return _}()},{key:"getJWTDecoded",value:function(){var e=this.getJWT();if(e)return d(e)}}]),e}();_["a"]=new b}}]);
//# sourceMappingURL=ninjacapture44.fe7135b9.js.map