(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ninjacapture20","ninjacapture26","ninjacapture30","ninjacapture34","ninjacapture40","ninjacapture42"],{"0085":function(e,t,n){"use strict";n("d4e6")},"0a81":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.connection?n("div",[n("div",{staticClass:"dailer-pad position-relative",attrs:{role:"group","aria-label":"Basic example"}},[n("div",{staticClass:"input-group phone-pad-section align-items-center w-100"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.phone_number,expression:"phone_number"}],staticClass:"bg-transparent border-0 font-weight-normal form-control h3 mb-0 p-0 text-center phno-placeholder text-white",attrs:{placeholder:"Enter phone number"},domProps:{value:e.phone_number},on:{input:function(t){t.target.composing||(e.phone_number=t.target.value)}}}),n("i",{staticClass:"fal fa-arrow-up pb-1"})]),n("b-list-group",[n("b-list-group-item",{staticClass:"rounded-0 p-0 border-left-0 border-right-0 border-light d-flex "},[n("div",{staticClass:"flex-grow-1 border-right"},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.conferenceParticipants",modifiers:{conferenceParticipants:!0}}],staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number justify-content-center",attrs:{variant:"transparent",block:""}},[n("span",{staticClass:"fe fe-user-plus"}),n("small",[e._v("Add")])])],1),n("div",{staticClass:"flex-grow-1 border-right"},[n("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.$emit("showkeypad")}}},[n("span",{staticClass:"fe fe-grid"}),n("small",[e._v("Keypad")])])],1),n("div",{staticClass:"flex-grow-1 "},[n("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){e.$emit("mutecall"),e.is_mute=!e.is_mute}}},[n("i",{class:"fe "+(e.is_mute?"fe-mic":"fe-mic-off text-danger")}),e.is_mute?n("small",[e._v("Mute")]):n("small",{staticClass:"text-danger"},[e._v("unmute")])])],1)])],1)],1),n("b-modal",{attrs:{size:"sm",id:"conferenceParticipants","content-class":"rounded-sm","body-class":"p-3 rounded-sm height-93vh","hide-header":"","hide-footer":"",title:"Add to conference"},on:{show:function(t){return e.getParticipants()}}},[n("ConferenceList",{ref:"conference_list_ref",attrs:{participants:e.participants,conference_sid:e.conference_sid,twilioConfig:e.twilioConfig,isLoading:e.isLoading,from_number:parseInt(e.from_number)},on:{updateParticipants:e.updateParticipants}})],1)],1):e._e()},i=[],r=(n("4de4"),n("a434"),n("96cf"),n("c964")),s=n("d4c9"),o=n("fe13"),c={props:{connection:Object,twilioMute:Boolean,twilioConfig:Object,call_sid:String},components:{ConferenceList:o["default"]},data:function(){return{phone_number:"",conference_name:"",conference_sid:"",from_number:"",is_mute:!0,participants:[],participants_contacts:[],isLoading:!0}},mounted:function(){this.is_mute=!this.twilioMute},methods:{getParticipants:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,s["a"].getParticipants(e.conference_sid,e.twilioConfig);case 3:n=t.sent,e.from_number=n.from_number,n=n.participants,e.participants=[],e.participants_contacts.filter((function(t){for(var a in n)n[a].call_sid==t.call_sid&&(n[a].phone_number=t.phone_number,e.participants.push(n[a]))})),e.isLoading=!1;case 9:case"end":return t.stop()}}),t)})))()},updateParticipants:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:"add"==e.type?(t.participants_contacts.push(e),t.participants.push(e)):"update"==e.type?(e.phone_number=t.participants[e.index].phone_number,t.participants[e.index]=e):"delete"==e.type&&t.participants.splice(e.index,1),t.$refs.conference_list_ref.$refs.conference_list_table.refresh();case 2:case"end":return n.stop()}}),n)})))()}}},l=c,_=(n("0085"),n("2877")),u=Object(_["a"])(l,a,i,!1,null,null,null);t["default"]=u.exports},"1eed":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"agent"},[n("b-card",{staticClass:"bg-dailer mb-0 border-0",attrs:{"no-body":""}},[n("div",{staticClass:"position-relative"},[n("Header",{attrs:{from:"agent"}}),e.is_start_timer&&"connected"==e.status?n("Timer",{ref:"timer",attrs:{app_name:e.app_name,connection:e.connection,phone_number:e.number}}):e._e()],1),n("div",[1==e.isKeypad?n("KeyPad",{ref:"keypad",attrs:{connection:e.connection},on:{digitPressed:e.digitPressed,phoneNumber:e.changeNumber}}):e._e(),e.connectedCall&&!e.isKeypad?n("ConferenceCall",{ref:"conference_call_ref",attrs:{connection:e.connection,twilioMute:e.twilioMute,twilioConfig:e.twilioConfig},on:{showkeypad:function(t){e.isKeypad=!e.isKeypad},mutecall:function(t){return e.muteCall()},conferencecall:e.conferenceCall}}):e._e(),n("b-list-group",[e.connectedCall&&!e.isKeypad?n("b-list-group-item",{staticClass:"rounded-0 p-0 border-left-0 border-right-0 border-light d-flex border-top-0"},[n("div",{staticClass:"flex-grow-1 border-right"},[n("Voicemail",{ref:"voicemail",attrs:{disableVoicemailButton:e.config.disableVoicemailButton,connection:e.connection}})],1),n("div",{staticClass:"flex-grow-1 border-right"},[n("PlayMessage",{attrs:{disablePlayButton:e.config.disablePlayButton,connection:e.connection}})],1),n("div",{staticClass:"flex-grow-1 "},[n("HoldCall",{attrs:{disableHoldButton:e.config.disablePlayButton}})],1)]):e._e(),n("b-list-group-item",{staticClass:"rounded-0 p-0 border-left-0 border-right-0 border-light d-flex border-bottom-0"},[n("div",{class:"flex-grow-1 border-right "+(e.connectedCall&&!e.isKeypad?"":"keyboard-number")},[e.connectedCall&&!e.isKeypad?n("TransferCall",{attrs:{connection:e.connection,domain_id:e.domain_id},on:{transfercall:function(t){return e.transferCall()}}}):e._e()],1),n("div",{staticClass:"align-items-center border-right d-flex flex-column flex-grow-1 justify-content-center border-bottom-0"},[e.is_start_timer?n("HangupCall",{staticClass:"float-btn",attrs:{connection:e.connection},on:{disconnectcall:function(t){return e.disconnect_call()}}}):e._e(),e.is_start_timer?e._e():n("b-button",{staticClass:"text-center text-white rounded-0 w-100 h-100 keyboard-number justify-content-center float-btn",attrs:{variant:"success",type:"button"},on:{click:e.initiateCall}},[n("span",{staticClass:"fe fe-phone"})])],1),n("div",{staticClass:"flex-grow-1"},[e.isKeypad&&e.connectedCall?n("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.showkeypad()}}},[n("span",{staticClass:"fe fe-grid"}),n("small",[e._v("Keypad")])]):e._e()],1)])],1)],1)])],1)},i=[],r=(n("99af"),n("d3b7"),n("25f0"),n("96cf"),n("c964")),s=n("f3f3"),o=n("2f62"),c=n("89c7"),l=n("9846"),_=n("73c2"),u=n("0a81"),d=n("c18d"),p=n("8502"),f=n("e853"),m=n("2cfc"),b=n("9b7b"),h=n("33fe"),g=n("27fe"),v=n("7f2c"),x={components:{Header:c["default"],Timer:l["default"],KeyPad:_["default"],ConferenceCall:u["default"],HangupCall:d["default"],TransferCall:p["default"],HoldCall:f["default"],Voicemail:h["default"],PlayMessage:g["default"]},props:{number:String,app_name:{type:String},is_make_call:{type:Boolean,default:!0},is_start_timer:{type:Boolean,default:!0},config:{type:Object,default:function(){return{disablePlayButton:!1,disableVoicemailButton:!1,disableHoldButton:!0}}}},data:function(){return{capability_url:"",connection:{},twilioConnection:{},status:"connected",twilioMute:!1,isKeypad:!1,connectedCall:!1,numbers:[],conference_call:!1,domain_id:"",twilioConfig:{}}},computed:Object(s["a"])({},Object(o["b"])(["isTwilioReady","device","checkDeviceStatus"])),watch:{isTwilioReady:function(e){e&&this.is_make_call&&this.initiateCall(),window.parent.postMessage({type:"isTwilioDeviceReady"},"*")},checkDeviceStatus:function(e){"connect"===e?(this.connectedCall=!0,this.status="connected"):"disconnect"==e&&(this.connectedCall=!1,this.is_start_timer=!1,this.is_make_call?this.status="":(this.status="connected",this.isKeypad=!0))}},mounted:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return v["a"].$on("incoming",(function(e){if("incoming"==e.type&&!i.is_make_call){i.twilioConnection=e.conn;var t={};t.direction=e.conn.direction,t.from=e.conn.parameters.From,t.callSid=e.conn.parameters.CallSid,t.type="IncomingCall",window.parent.postMessage(t,"*")}if("Accept"==e.response&&!i.is_make_call){i.twilioConnection.accept(),i.is_start_timer=!0,i.status="connected",i.connectedCall=!0,i.number=e.number,i.isKeypad=!1;var n={type:"showDialer"};window.parent.postMessage(n,"*")}"Reject"!=e.response||i.is_make_call||i.twilioConnection.reject()})),v["a"].$on("user_call_hangup",(function(){i.disconnect_call()})),t=b["a"].jwt_token,e.next=5,m["a"].getCapabilityAgent(this.app_name);case 5:return n=e.sent,this.domain_id=t.tenant_id,e.next=9,this.$store.dispatch("getToken","".concat(n.pref_value,"?To=PBX_").concat(this.domain_id,"_").concat(t.user_id));case 9:a=e.sent,this.twilioConfig=a,this.is_make_call||(this.isKeypad=!0,this.status="connected");case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{showkeypad:function(){this.isKeypad=!this.isKeypad},initiateCall:function(){var e=this;this.number.length>5&&"number"!=this.number&&(window.self=this,this.connectedCall=!0,this.isKeypad=!1,this.$nextTick((function(){e.is_start_timer=!0})),this.connection=this.device.connect({To:this.number}),this.$store.dispatch("twilioDeviceListeners"),this.twilioConnection=this.connection,this.app_name&&this.$emit("callConnected",this.twilioConnection))},disconnect_call:function(){this.number="",this.connectedCall=!1,this.is_start_timer=!1,this.status="connected",this.device.disconnectAll()},muteCall:function(){this.twilioMute=!this.twilioMute,this.device.activeConnection().mute(this.twilioMute)},digitPressed:function(e){this.is_start_timer&&this.twilioConnection.sendDigits(e.toString()),"number"==this.number&&(this.number=""),this.number+=e.toString()},conferenceCall:function(e){this.conference_call=!0,this.numbers.push(e)},changeNumber:function(e){return this.number=e}}},w=x,y=(n("5844"),n("2877")),C=Object(y["a"])(w,a,i,!1,null,null,null);t["default"]=C.exports},"27fe":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.connection?n("div",[e.connection?n("b-button",{class:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number justify-content-center "+(e.disablePlayButton?"voxdesk-btn-disabled":""),attrs:{variant:"transparent",block:"",disabled:!e.voice_mail||e.disablePlayButton},on:{click:function(t){e.show_messages=!e.show_messages,e.is_playing_message=!e.is_playing_message}}},[n("i",{class:"fe "+(e.is_playing_message?"fe-play-circle":"fe-stop-circle text-danger")}),e.is_playing_message?n("small",[e._v("Play")]):n("small",{staticClass:"text-danger"},[e._v("Stop")])]):e._e(),e.show_messages?n("div",{staticClass:"audio position-absolute"},e._l(e.files,(function(t,a){return n("div",{key:a},[n("div",{staticClass:"card-body"},[n("p",[e._v(e._s(t.name))]),n("audio",{staticClass:"height-40",attrs:{controls:"controls",src:t.key}})])])})),0):e._e()],1):e._e()},i=[],r=(n("99af"),n("4160"),n("b0c0"),n("ac1f"),n("1276"),n("159b"),n("96cf"),n("c964")),s=n("2cfc"),o={props:{connection:Object,disablePlayButton:Boolean},data:function(){return{show_messages:!1,files:[],is_playing_message:!0}},mounted:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getRegion();case 2:return t=e.sent,e.next=5,s["a"].getMedia();case 5:this.files=e.sent,this.files.forEach((function(e){e.name=e.key.split("pbxplus/")[1],e.key="https://ap1-".concat(t,"-infinity-user-data.s3.amazonaws.com/").concat(e.key)}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},c=o,l=(n("7f9c"),n("2877")),_=Object(l["a"])(c,a,i,!1,null,"64506390",null);t["default"]=_.exports},"2cfc":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("99af"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("7db0"),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_1__),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("96cf"),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_2__),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("c964"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("276c"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("e954"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("920b"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("92a6"),axios__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_8__),_jwt__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("9b7b"),_core_data__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("a11a"),User_Server="https://api.${region}.500apps.com/auth/v1/users/domain_user_details?limit=50",Server="https://api.${region}.500apps.com/pbxplus/v1",Agent_Capability="https://pref.${region}.500apps.com/v2/app_pref?where=app_name='${app_name}' and pref_key='twilioDialer'",Voicemail_Server="https://api.${region}.500apps.com/voxdesk/v1/voicemail-drop/${callsid}?audio_url=${audio_url}",Media_Server="https://api.${region}.500apps.com/files/?app=pbxplus&limit=50",DialerData=function(_Data){Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__["a"])(DialerData,_Data);var _super=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_7__["a"])(DialerData);function DialerData(){return Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__["a"])(this,DialerData),_super.apply(this,arguments)}return Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__["a"])(DialerData,[{key:"getProfile",value:function(){var _getProfile=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["a"])(regeneratorRuntime.mark((function _callee(){var headers,region,url,result,decoded,current_user;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context.sent,region=this.getRegion(),url=eval("`"+User_Server+"`"),_context.next=7,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get(url,{headers:headers});case 7:if(result=_context.sent,decoded=_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].getJWTDecoded(),decoded){_context.next=11;break}return _context.abrupt("return","");case 11:return current_user=result.data.find((function(e){return e.email==decoded.email})),_context.abrupt("return",current_user);case 13:case"end":return _context.stop()}}),_callee,this)})));function getProfile(){return _getProfile.apply(this,arguments)}return getProfile}()},{key:"getCapabilityVisitor",value:function(){var _getCapabilityVisitor=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["a"])(regeneratorRuntime.mark((function _callee2(domain_id,callflow_id,api_key){var region,url,result;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return region=this.getRegion(),url=eval("`"+Server+"`"),_context2.next=4,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get("".concat(url,"/c2c/").concat(domain_id,"/").concat(callflow_id,"/").concat(api_key));case 4:return result=_context2.sent,_context2.abrupt("return",result.data);case 6:case"end":return _context2.stop()}}),_callee2,this)})));function getCapabilityVisitor(e,t,n){return _getCapabilityVisitor.apply(this,arguments)}return getCapabilityVisitor}()},{key:"getCapabilityAgent",value:function(){var _getCapabilityAgent=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["a"])(regeneratorRuntime.mark((function _callee3(app_name){var headers,region,url,result;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context3.sent,region=this.getRegion(),url=eval("`"+Agent_Capability+"`"),_context3.next=7,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get("".concat(url),{headers:headers});case 7:return result=_context3.sent,_context3.abrupt("return",result.data[0]);case 9:case"end":return _context3.stop()}}),_callee3,this)})));function getCapabilityAgent(e){return _getCapabilityAgent.apply(this,arguments)}return getCapabilityAgent}()},{key:"sendVoicemail",value:function(){var _sendVoicemail=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["a"])(regeneratorRuntime.mark((function _callee4(callsid,audio_url){var headers,region,url,result;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context4.sent,region=this.getRegion(),url=eval("`"+Voicemail_Server+"`"),_context4.next=7,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get("".concat(url),{headers:headers});case 7:return result=_context4.sent,_context4.abrupt("return",result);case 9:case"end":return _context4.stop()}}),_callee4,this)})));function sendVoicemail(e,t){return _sendVoicemail.apply(this,arguments)}return sendVoicemail}()},{key:"getMedia",value:function(){var _getMedia=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["a"])(regeneratorRuntime.mark((function _callee5(){var headers,region,url,result;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context5.sent,region=this.getRegion(),url=eval("`"+Media_Server+"`"),_context5.next=7,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get("".concat(url),{headers:headers});case 7:return result=_context5.sent,_context5.abrupt("return",result.data);case 9:case"end":return _context5.stop()}}),_callee5,this)})));function getMedia(){return _getMedia.apply(this,arguments)}return getMedia}()}]),DialerData}(_core_data__WEBPACK_IMPORTED_MODULE_10__["a"]);__webpack_exports__["a"]=new DialerData},"33fe":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.connection?[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.showVoicemails",modifiers:{showVoicemails:!0}}],class:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number justify-content-center "+(e.disableVoicemailButton?"voxdesk-btn-disabled":""),attrs:{variant:"transparent",block:"",disabled:e.voice_mail||e.disableVoicemailButton}},[n("span",{staticClass:"fe fe-voicemail"}),n("small",[e._v("Voicemail")])])]:e._e(),n("b-modal",{attrs:{centered:"",size:"sm",id:"showVoicemails","body-class":"rounded-sm p-3","hide-footer":"","hide-header":""}},[n("b-dropdown",{attrs:{id:"voicemail_list",text:e.file,variant:"white",size:"sm",block:"","toggle-class":"d-flex justify-content-between align-items-center","menu-class":"vh-97 overflow-auto py-2"}},e._l(e.media,(function(t,a){return n("b-dropdown-item",{key:a,on:{click:function(n){e.sendVoicemail(t.key),e.file=t.key.split("/")[2]}}},[n("p",{staticClass:"mb-0 text-truncate"},[e._v(e._s(e.get_dropdown_text(t)))])])})),1),n("b-overlay",{attrs:{show:e.isBusy,"spinner-variant":"primary","spinner-small":"","no-wrap":"",opacity:"0.5"}}),n("span",{staticClass:"small",class:"text-"+e.style},[e._v(e._s(e.message))])],1)],2)},i=[],r=(n("ac1f"),n("1276"),n("96cf"),n("c964")),s=n("2cfc"),o=(n("99af"),n("276c")),c=n("e954"),l=n("fbf1"),_=n("f20d"),u=n("920b"),d=n("92a6"),p=n("a11a"),f=function(e){Object(u["a"])(n,e);var t=Object(d["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return Object(c["a"])(n,[{key:"get_public_s3url",value:function(e){var t=Object(l["a"])(Object(_["a"])(n.prototype),"getRegion",this).call(this),a="dev"==t||"qa"==t?"ap1-".concat(t):t;return"https://".concat(a,"-infinity-user-data.s3.amazonaws.com/").concat(e)}}]),n}(p["a"]),m=new f,b={props:{connection:Object,disableVoicemailButton:Boolean},data:function(){return{media:[],voice_mail:!1,file:"Select Voicemail",isBusy:!1,message:"",style:"success"}},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].getMedia();case 2:e.media=t.sent;case 3:case"end":return t.stop()}}),t)})))()},methods:{sendVoicemail:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("connection",t.connection),t.isBusy=!0,n.next=4,m.get_public_s3url(e);case 4:return a=n.sent,n.prev=5,n.next=8,s["a"].sendVoicemail(t.connection.parameters.CallSid,a);case 8:t.message="Voicemail dropped",t.$bvModal.hide("showVoicemails"),n.next=18;break;case 12:n.prev=12,n.t0=n["catch"](5),console.log("error",n.t0),window.e=n.t0,t.message="Unable to drop voicemail",t.style="danger";case 18:t.isBusy=!1;case 19:case"end":return n.stop()}}),n,null,[[5,12]])})))()},get_dropdown_text:function(e){var t=e.key.split("/");return 4==t.length?t[3]:t[2]}}},h=b,g=(n("c856"),n("2877")),v=Object(g["a"])(h,a,i,!1,null,null,null);t["default"]=v.exports},"3c14":function(e,t,n){"use strict";n("7584")},"50c1":function(e,t,n){},5844:function(e,t,n){"use strict";n("50c1")},"6e1d":function(e,t,n){},"73c2":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-form-group",{staticClass:"mb-0"},[e.is_visitor?e._e():n("b-input",{staticClass:"bg-transparent border-0 font-weight-normal form-control h3 mb-0 p-0 text-center text-white phno-placeholder",attrs:{placeholder:"Enter phone number"},on:{input:e.sendNumber},model:{value:e.phone_number,callback:function(t){e.phone_number=t},expression:"phone_number"}})],1),n("b-list-group",[n("b-list-group-item",{staticClass:"rounded-0 p-0 border-left-0 border-right-0 border-light d-flex "},[n("div",{staticClass:"flex-grow-1 border-right"},[n("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("1")}}},[n("span",{staticClass:"font-weight-bold"},[e._v("1")]),n("small",{staticClass:"font-size-9px mr-3 pr-1"})])],1),n("div",{staticClass:"flex-grow-1 border-right"},[n("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("2")}}},[n("span",{staticClass:"font-weight-bold"},[e._v("2")]),n("small",{staticClass:"font-size-9px"},[e._v("ABC")])])],1),n("div",{staticClass:"flex-grow-1"},[n("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("3")}}},[n("span",{staticClass:"font-weight-bold"},[e._v("3")]),n("small",{staticClass:"font-size-9px"},[e._v("DEF")])])],1)]),n("b-list-group-item",{staticClass:"rounded-0 p-0 border-left-0 border-right-0 border-light d-flex "},[n("div",{staticClass:"flex-grow-1 border-right"},[n("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("4")}}},[n("span",{staticClass:"font-weight-bold"},[e._v("4")]),n("small",{staticClass:"font-size-9px"},[e._v("GHI")])])],1),n("div",{staticClass:"flex-grow-1 border-right"},[n("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("5")}}},[n("span",{staticClass:"font-weight-bold"},[e._v("5")]),n("small",{staticClass:"font-size-9px"},[e._v("JKL")])])],1),n("div",{staticClass:"flex-grow-1 "},[n("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("6")}}},[n("span",{staticClass:"font-weight-bold"},[e._v("6")]),n("small",{staticClass:"font-size-9px"},[e._v("MNO")])])],1)]),n("b-list-group-item",{staticClass:"rounded-0 p-0 border-left-0 border-right-0 border-light d-flex "},[n("div",{staticClass:"flex-grow-1 border-right"},[n("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("7")}}},[n("span",{staticClass:"font-weight-bold"},[e._v("7")]),n("small",{staticClass:"font-size-9px"},[e._v("PQRS")])])],1),n("div",{staticClass:"flex-grow-1 border-right"},[n("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("8")}}},[n("span",{staticClass:"font-weight-bold"},[e._v("8")]),n("small",{staticClass:"font-size-9px"},[e._v("TUV")])])],1),n("div",{staticClass:"flex-grow-1 "},[n("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("9")}}},[n("span",{staticClass:"font-weight-bold"},[e._v("9")]),n("small",{staticClass:"font-size-9px"},[e._v("WXYZ")])])],1)]),n("b-list-group-item",{staticClass:"rounded-0 p-0 border-left-0 border-right-0 border-light d-flex border-bottom-0"},[n("div",{staticClass:"flex-grow-1 border-right"},[n("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("*")}}},[n("span",{staticClass:"font-weight-bold star"},[e._v("*")])])],1),n("div",{staticClass:"flex-grow-1 border-right"},[n("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("0")}}},[n("span",{staticClass:"font-weight-bold"},[e._v("0")])])],1),n("div",{staticClass:"flex-grow-1 "},[n("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("#")}}},[n("span",{staticClass:"font-weight-bold"},[e._v("#")])])],1)])],1)],1)},i=[],r={props:{connection:Object},data:function(){return{phone_number:"",is_visitor:"visitor"==this.$route.params.from}},methods:{sendDigit:function(e){this.phone_number=this.phone_number+e,this.$emit("digitPressed",e)},sendNumber:function(){this.$emit("phoneNumber",this.phone_number)}}},s=r,o=n("2877"),c=Object(o["a"])(s,a,i,!1,null,null,null);t["default"]=c.exports},7584:function(e,t,n){},"7db0":function(e,t,n){"use strict";var a=n("23e7"),i=n("b727").find,r=n("44d2"),s=n("ae40"),o="find",c=!0,l=s(o);o in[]&&Array(1)[o]((function(){c=!1})),a({target:"Array",proto:!0,forced:c||!l},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(o)},"7f9c":function(e,t,n){"use strict";n("6e1d")},8502:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.connection?[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.showtypes",modifiers:{showtypes:!0}}],staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){e.show_transfer_call=!e.show_transfer_call}}},[n("span",{staticClass:"fe fe-phone-forwarded"}),n("small",[e._v("Transfer")])])]:e._e(),e.show_transfer_call?n("b-modal",{attrs:{size:"sm",id:"showtypes","body-class":"p-0","hide-footer":"","hide-header":""}},[n("div",{staticClass:"p-3 m-2 d-flex align-items-center"},[n("b-button-group",{staticClass:"w-100"},[n("b-button",{attrs:{size:"sm",variant:"warm"==e.call_type?"primary":"white"},on:{click:function(t){e.call_type="warm",e.show_agents=!0}}},[n("div",{staticClass:"d-flex align-items-center justify-content-center"},[n("i",{staticClass:"fe fe-sun mr-2"}),n("p",{staticClass:"mb-0 text"},[e._v("Warm")])])]),n("b-button",{attrs:{size:"sm",variant:"cold"==e.call_type?"primary":"white"},on:{click:function(t){e.call_type="cold",e.show_agents=!0}}},[n("div",{staticClass:"d-flex align-items-center justify-content-center"},[n("i",{staticClass:"fe fe-moon mr-2"}),n("p",{staticClass:"mb-0 text"},[e._v("Cold")])])])],1)],1),e.show_agents&&e.show_transfer_call?n("div",{staticClass:"px-3 mx-2 mb-2 pb-3"},[n("b-form-input",{staticClass:"font-weight-normal h3 mb-0 text-center",attrs:{size:"sm",placeholder:"Enter phone number"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.transferCall(e.phone_number)}},model:{value:e.phone_number,callback:function(t){e.phone_number=t},expression:"phone_number"}}),n("div",{staticClass:"d-flex flex-nowrap align-items-center my-2"},[n("span",{staticClass:"border-top w-50"}),n("span",{staticClass:"small px-3 "},[e._v("OR")]),n("span",{staticClass:"border-top w-50"})]),n("b-dropdown",{attrs:{block:"",id:"agents_list",text:"Agents",variant:"white",size:"sm","toggle-class":"rounded-top-0 d-flex justify-content-between align-items-center"}},e._l(e.users,(function(t,a){return n("b-dropdown-item",{key:a,on:{click:function(n){return e.transferCall("PBX_"+e.domain_id+"_"+t.domain_user_id,"client")}}},[e._v(e._s(t.user_name))])})),1),n("b-overlay",{attrs:{show:e.isBusy,"no-wrap":"",opacity:"0.5"}})],1):e._e()]):e._e()],2)},i=[],r=(n("a9e3"),n("96cf"),n("c964")),s=n("d4c9"),o={props:{connection:Object,domain_id:Number},data:function(){return{users:[],show_transfer_call:!1,show_agents:!1,call_type:"",phone_number:"",isBusy:!1}},mounted:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getAgents();case 2:this.users=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{transferCall:function(e){var t=arguments,n=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t.length>1&&void 0!==t[1]?t[1]:"number",n.isBusy=!0,a.next=4,s["a"].transferCall(n.connection.parameters.CallSid,n.call_type,i,e);case 4:n.phone_number="",n.isBusy=!1,n.$bvModal.hide("showtypes");case 7:case"end":return a.stop()}}),a)})))()}}},c=o,l=n("2877"),_=Object(l["a"])(c,a,i,!1,null,null,null);t["default"]=_.exports},"89c7":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-100"},["agent"==e.from?n("div",{staticClass:"d-flex card-body px-4 pt-3 pb-0 mt-3"},[e.profile.pic_path?n("b-img",{staticClass:"rounded",attrs:{src:e.profile.pic_path,alt:"Agent profile",height:"35",width:"35"}}):e._e(),n("h5",{staticClass:"first-letter-caps font-size-base mb-0 ml-3 text-truncate text-white opacity-0-8"},[e._v(e._s(e.profile.name))])],1):e._e(),"visitor"==e.from?[n("b-button",{staticClass:"mt-3 ml-3 call-now",style:e.style_call_now,attrs:{variant:"outline"},on:{click:function(t){e.$emit("visitor_click","call_now"),e.updateStyle("callnow")}}},[n("span",{staticClass:"fe fe-airplay mr-2 align-middle"}),e._v("Call from Computer")]),n("b-button",{staticClass:"ml-3 mt-3 call-back",style:e.style_call_back,attrs:{variant:"outline"},on:{click:function(t){e.$emit("visitor_click","call_back"),e.updateStyle("callback")}}},[n("span",{staticClass:"fe fe-phone-forwarded mr-2 align-middle"}),e._v("Call Back")])]:e._e()],2)},i=[],r=(n("96cf"),n("c964")),s=n("2cfc"),o={props:{from:String,widgetData:Object},data:function(){return{profile:{},show_form:!1,style_call_now:{},style_call_back:{}}},mounted:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("visitor"==this.from){e.next=5;break}return e.next=3,s["a"].getProfile();case 3:this.profile=e.sent,this.profile.pic_path||(this.profile.pic_path="/img/default_avatar.png");case 5:this.widgetData.bgcolor?this.style_call_now={background:this.widgetData.bgcolor,borderColor:this.widgetData.bgcolor,color:"white"}:setTimeout((function(){t.updateStyle("callnow")}),300);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{updateStyle:function(e){if("callnow"==e)return this.style_call_now={background:this.widgetData.bgcolor,borderColor:this.widgetData.bgcolor,color:"white"},void(this.style_call_back={borderColor:this.widgetData.bgcolor2,color:this.widgetData.bgcolor2});this.style_call_now={borderColor:this.widgetData.bgcolor,color:this.widgetData.bgcolor},this.style_call_back={background:this.widgetData.bgcolor2,borderColor:this.widgetData.bgcolor2,color:"white"}}}},c=o,l=(n("3c14"),n("2877")),_=Object(l["a"])(c,a,i,!1,null,null,null);t["default"]=_.exports},9846:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"d-inline-block text-white line-hieght-1-2 "+("pbxplus"==e.app_name?"position-relative ml-6":"position-absolute top-68px ml-6")+"  mt-n4 opacity-0-8"},[e.connection&&"pbxplus"==e.app_name?n("div",{staticClass:"font-weight-normal font-size-14px my-1"},[e._v(e._s(e.phone_number))]):e._e(),e.connection?n("p",{staticClass:"mb-0 font-size-12px "},[e._v(e._s(this.duration))]):e._e()])},i=[],r=(n("99af"),{props:{connection:Object,phone_number:String,app_name:String},data:function(){return{duration:"",timeInterval:""}},mounted:function(){var e=this,t={day:0,hours:0,minutes:0,seconds:0},n=new Date(t.day,t.hours,t.minutes,t.seconds),a=1;this.timeInterval=setInterval((function(){n=new Date(n.getTime()+1e3*a),e.duration="".concat(n.getHours()<10?"0"+n.getHours():n.getHours()," :\n                        ").concat(n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes()," :\n                        ").concat(n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds())}),1e3*Math.abs(a))}}),s=r,o=n("2877"),c=Object(o["a"])(s,a,i,!1,null,null,null);t["default"]=c.exports},a434:function(e,t,n){"use strict";var a=n("23e7"),i=n("23cb"),r=n("a691"),s=n("50c4"),o=n("7b0b"),c=n("65f0"),l=n("8418"),_=n("1dde"),u=n("ae40"),d=_("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,m=Math.min,b=9007199254740991,h="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d||!p},{splice:function(e,t){var n,a,_,u,d,p,g=o(this),v=s(g.length),x=i(e,v),w=arguments.length;if(0===w?n=a=0:1===w?(n=0,a=v-x):(n=w-2,a=m(f(r(t),0),v-x)),v+n-a>b)throw TypeError(h);for(_=c(g,a),u=0;u<a;u++)d=x+u,d in g&&l(_,u,g[d]);if(_.length=a,n<a){for(u=x;u<v-a;u++)d=u+a,p=u+n,d in g?g[p]=g[d]:delete g[p];for(u=v;u>v-a+n;u--)delete g[u-1]}else if(n>a)for(u=v-a;u>x;u--)d=u+a-1,p=u+n-1,d in g?g[p]=g[d]:delete g[p];for(u=0;u<n;u++)g[u+x]=arguments[u+2];return g.length=v-a+n,_}})},bbe1:function(e,t,n){},c18d:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-button",{staticClass:"text-center text-white rounded-0 w-100 h-100 keyboard-number justify-content-center",attrs:{variant:"danger"},on:{click:function(t){return e.disconnectCall()}}},[n("span",{staticClass:"fe fe-phone"})])},i=[],r={props:{connection:Object},data:function(){return{}},methods:{disconnectCall:function(){this.$emit("disconnectcall")}}},s=r,o=n("2877"),c=Object(o["a"])(s,a,i,!1,null,null,null);t["default"]=c.exports},c856:function(e,t,n){"use strict";n("bbe1")},d4e6:function(e,t,n){},e853:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number justify-content-center",attrs:{variant:"transparent",block:"",disabled:e.disableHoldButton},on:{click:function(t){e.is_hold=!e.is_hold}}},[n("span",{class:"fe fe-pause-circle "+(e.is_hold?"":"text-danger")}),n("small",{class:"mb-0 text "+(e.is_hold?"":"text-danger")},[e._v("Hold")])])},i=[],r={props:{disableHoldButton:Boolean},data:function(){return{is_hold:!0}}},s=r,o=n("2877"),c=Object(o["a"])(s,a,i,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=ninjacapture20.d3757b94.js.map