(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ninjacapture36","ninjacapture22","ninjacapture28","ninjacapture30","ninjacapture34"],{"2ae6":function(module,__webpack_exports__,__webpack_require__){"use strict";var regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("96cf"),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0__),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("c964"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("276c"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("e954"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("920b"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("92a6"),axios__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_6__),_jwt__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("9b7b"),_core_data__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("a11a"),CallBack_Server="https://api.${region}.500apps.com/pbxplus/v1/contact-info?app_name=pbxplus",CallBack=function(_Data){Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__["a"])(CallBack,_Data);var _super=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__["a"])(CallBack);function CallBack(){return Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__["a"])(this,CallBack),_super.apply(this,arguments)}return Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__["a"])(CallBack,[{key:"add",value:function(){var _add=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["a"])(regeneratorRuntime.mark((function _callee(form){var headers,region,url,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_jwt__WEBPACK_IMPORTED_MODULE_7__["a"].setHeader();case 2:return headers=_context.sent,headers["x-api-key"]=form.api_key,region=this.getRegion(),url=CallBack_Server,url=eval("`"+url+"`"),_context.next=9,axios__WEBPACK_IMPORTED_MODULE_6___default.a.post(url,form,{headers:headers});case 9:return response=_context.sent,_context.abrupt("return",response.data);case 11:case"end":return _context.stop()}}),_callee,this)})));function add(e){return _add.apply(this,arguments)}return add}()}]),CallBack}(_core_data__WEBPACK_IMPORTED_MODULE_8__["a"]);__webpack_exports__["a"]=new CallBack},"2cfc":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("99af"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("7db0"),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_1__),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("96cf"),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_2__),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("c964"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("276c"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("e954"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("920b"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("92a6"),axios__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_8__),_jwt__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("9b7b"),_core_data__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("a11a"),User_Server="https://api.${region}.500apps.com/auth/v1/users/domain_user_details?limit=50",Server="https://api.${region}.500apps.com/pbxplus/v1",Agent_Capability="https://pref.${region}.500apps.com/v2/app_pref?where=app_name='${app_name}' and pref_key='twilioDialer'",Voicemail_Server="https://api.${region}.500apps.com/voxdesk/v1/voicemail-drop/${callsid}?audio_url=${audio_url}",Media_Server="https://api.${region}.500apps.com/files/?app=pbxplus&limit=50",DialerData=function(_Data){Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__["a"])(DialerData,_Data);var _super=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_7__["a"])(DialerData);function DialerData(){return Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__["a"])(this,DialerData),_super.apply(this,arguments)}return Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__["a"])(DialerData,[{key:"getProfile",value:function(){var _getProfile=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["a"])(regeneratorRuntime.mark((function _callee(){var headers,region,url,result,decoded,current_user;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context.sent,region=this.getRegion(),url=eval("`"+User_Server+"`"),_context.next=7,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get(url,{headers:headers});case 7:if(result=_context.sent,decoded=_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].getJWTDecoded(),decoded){_context.next=11;break}return _context.abrupt("return","");case 11:return current_user=result.data.find((function(e){return e.email==decoded.email})),_context.abrupt("return",current_user);case 13:case"end":return _context.stop()}}),_callee,this)})));function getProfile(){return _getProfile.apply(this,arguments)}return getProfile}()},{key:"getCapabilityVisitor",value:function(){var _getCapabilityVisitor=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["a"])(regeneratorRuntime.mark((function _callee2(domain_id,callflow_id,api_key){var region,url,result;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return region=this.getRegion(),url=eval("`"+Server+"`"),_context2.next=4,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get("".concat(url,"/c2c/").concat(domain_id,"/").concat(callflow_id,"/").concat(api_key));case 4:return result=_context2.sent,_context2.abrupt("return",result.data);case 6:case"end":return _context2.stop()}}),_callee2,this)})));function getCapabilityVisitor(e,t,_){return _getCapabilityVisitor.apply(this,arguments)}return getCapabilityVisitor}()},{key:"getCapabilityAgent",value:function(){var _getCapabilityAgent=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["a"])(regeneratorRuntime.mark((function _callee3(app_name){var headers,region,url,result;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context3.sent,region=this.getRegion(),url=eval("`"+Agent_Capability+"`"),_context3.next=7,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get("".concat(url),{headers:headers});case 7:return result=_context3.sent,_context3.abrupt("return",result.data[0]);case 9:case"end":return _context3.stop()}}),_callee3,this)})));function getCapabilityAgent(e){return _getCapabilityAgent.apply(this,arguments)}return getCapabilityAgent}()},{key:"sendVoicemail",value:function(){var _sendVoicemail=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["a"])(regeneratorRuntime.mark((function _callee4(callsid,audio_url){var headers,region,url,result;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context4.sent,region=this.getRegion(),url=eval("`"+Voicemail_Server+"`"),_context4.next=7,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get("".concat(url),{headers:headers});case 7:return result=_context4.sent,_context4.abrupt("return",result);case 9:case"end":return _context4.stop()}}),_callee4,this)})));function sendVoicemail(e,t){return _sendVoicemail.apply(this,arguments)}return sendVoicemail}()},{key:"getMedia",value:function(){var _getMedia=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["a"])(regeneratorRuntime.mark((function _callee5(){var headers,region,url,result;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,_jwt__WEBPACK_IMPORTED_MODULE_9__["a"].setHeader();case 2:return headers=_context5.sent,region=this.getRegion(),url=eval("`"+Media_Server+"`"),_context5.next=7,axios__WEBPACK_IMPORTED_MODULE_8___default.a.get("".concat(url),{headers:headers});case 7:return result=_context5.sent,_context5.abrupt("return",result.data);case 9:case"end":return _context5.stop()}}),_callee5,this)})));function getMedia(){return _getMedia.apply(this,arguments)}return getMedia}()}]),DialerData}(_core_data__WEBPACK_IMPORTED_MODULE_10__["a"]);__webpack_exports__["a"]=new DialerData},"3c14":function(e,t,_){"use strict";_("7584")},"4dda":function(e,t,_){"use strict";_("7046")},"4de4":function(e,t,_){"use strict";var r=_("23e7"),a=_("b727").filter,n=_("1dde"),i=_("ae40"),s=n("filter"),o=i("filter");r({target:"Array",proto:!0,forced:!s||!o},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},7046:function(e,t,_){},"73c2":function(e,t,_){"use strict";_.r(t);var r=function(){var e=this,t=e.$createElement,_=e._self._c||t;return _("div",[_("b-form-group",{staticClass:"mb-0"},[e.is_visitor?e._e():_("b-input",{staticClass:"bg-transparent border-0 font-weight-normal form-control h3 mb-0 p-0 text-center text-white phno-placeholder",attrs:{placeholder:"Enter phone number"},on:{input:e.sendNumber},model:{value:e.phone_number,callback:function(t){e.phone_number=t},expression:"phone_number"}})],1),_("b-list-group",[_("b-list-group-item",{staticClass:"rounded-0 p-0 border-left-0 border-right-0 border-light d-flex "},[_("div",{staticClass:"flex-grow-1 border-right"},[_("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("1")}}},[_("span",{staticClass:"font-weight-bold"},[e._v("1")]),_("small",{staticClass:"font-size-9px mr-3 pr-1"})])],1),_("div",{staticClass:"flex-grow-1 border-right"},[_("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("2")}}},[_("span",{staticClass:"font-weight-bold"},[e._v("2")]),_("small",{staticClass:"font-size-9px"},[e._v("ABC")])])],1),_("div",{staticClass:"flex-grow-1"},[_("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("3")}}},[_("span",{staticClass:"font-weight-bold"},[e._v("3")]),_("small",{staticClass:"font-size-9px"},[e._v("DEF")])])],1)]),_("b-list-group-item",{staticClass:"rounded-0 p-0 border-left-0 border-right-0 border-light d-flex "},[_("div",{staticClass:"flex-grow-1 border-right"},[_("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("4")}}},[_("span",{staticClass:"font-weight-bold"},[e._v("4")]),_("small",{staticClass:"font-size-9px"},[e._v("GHI")])])],1),_("div",{staticClass:"flex-grow-1 border-right"},[_("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("5")}}},[_("span",{staticClass:"font-weight-bold"},[e._v("5")]),_("small",{staticClass:"font-size-9px"},[e._v("JKL")])])],1),_("div",{staticClass:"flex-grow-1 "},[_("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("6")}}},[_("span",{staticClass:"font-weight-bold"},[e._v("6")]),_("small",{staticClass:"font-size-9px"},[e._v("MNO")])])],1)]),_("b-list-group-item",{staticClass:"rounded-0 p-0 border-left-0 border-right-0 border-light d-flex "},[_("div",{staticClass:"flex-grow-1 border-right"},[_("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("7")}}},[_("span",{staticClass:"font-weight-bold"},[e._v("7")]),_("small",{staticClass:"font-size-9px"},[e._v("PQRS")])])],1),_("div",{staticClass:"flex-grow-1 border-right"},[_("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("8")}}},[_("span",{staticClass:"font-weight-bold"},[e._v("8")]),_("small",{staticClass:"font-size-9px"},[e._v("TUV")])])],1),_("div",{staticClass:"flex-grow-1 "},[_("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("9")}}},[_("span",{staticClass:"font-weight-bold"},[e._v("9")]),_("small",{staticClass:"font-size-9px"},[e._v("WXYZ")])])],1)]),_("b-list-group-item",{staticClass:"rounded-0 p-0 border-left-0 border-right-0 border-light d-flex border-bottom-0"},[_("div",{staticClass:"flex-grow-1 border-right"},[_("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("*")}}},[_("span",{staticClass:"font-weight-bold star"},[e._v("*")])])],1),_("div",{staticClass:"flex-grow-1 border-right"},[_("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("0")}}},[_("span",{staticClass:"font-weight-bold"},[e._v("0")])])],1),_("div",{staticClass:"flex-grow-1 "},[_("b-button",{staticClass:"text-center text-white rounded-0 d-flex flex-column align-items-center h-100 keyboard-number keypad justify-content-center",attrs:{variant:"transparent",block:""},on:{click:function(t){return e.sendDigit("#")}}},[_("span",{staticClass:"font-weight-bold"},[e._v("#")])])],1)])],1)],1)},a=[],n={props:{connection:Object},data:function(){return{phone_number:"",is_visitor:"visitor"==this.$route.params.from}},methods:{sendDigit:function(e){this.phone_number=this.phone_number+e,this.$emit("digitPressed",e)},sendNumber:function(){this.$emit("phoneNumber",this.phone_number)}}},i=n,s=_("2877"),o=Object(s["a"])(i,r,a,!1,null,null,null);t["default"]=o.exports},7584:function(e,t,_){},"7db0":function(e,t,_){"use strict";var r=_("23e7"),a=_("b727").find,n=_("44d2"),i=_("ae40"),s="find",o=!0,l=i(s);s in[]&&Array(1)[s]((function(){o=!1})),r({target:"Array",proto:!0,forced:o||!l},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),n(s)},"89c7":function(e,t,_){"use strict";_.r(t);var r=function(){var e=this,t=e.$createElement,_=e._self._c||t;return _("div",{staticClass:"w-100"},["agent"==e.from?_("div",{staticClass:"d-flex card-body px-4 pt-3 pb-0 mt-3"},[e.profile.pic_path?_("b-img",{staticClass:"rounded",attrs:{src:e.profile.pic_path,alt:"Agent profile",height:"35",width:"35"}}):e._e(),_("h5",{staticClass:"first-letter-caps font-size-base mb-0 ml-3 text-truncate text-white opacity-0-8"},[e._v(e._s(e.profile.name))])],1):e._e(),"visitor"==e.from?[_("b-button",{staticClass:"mt-3 ml-3 call-now",style:e.style_call_now,attrs:{variant:"outline"},on:{click:function(t){e.$emit("visitor_click","call_now"),e.updateStyle("callnow")}}},[_("span",{staticClass:"fe fe-airplay mr-2 align-middle"}),e._v("Call from Computer")]),_("b-button",{staticClass:"ml-3 mt-3 call-back",style:e.style_call_back,attrs:{variant:"outline"},on:{click:function(t){e.$emit("visitor_click","call_back"),e.updateStyle("callback")}}},[_("span",{staticClass:"fe fe-phone-forwarded mr-2 align-middle"}),e._v("Call Back")])]:e._e()],2)},a=[],n=(_("96cf"),_("c964")),i=_("2cfc"),s={props:{from:String,widgetData:Object},data:function(){return{profile:{},show_form:!1,style_call_now:{},style_call_back:{}}},mounted:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("visitor"==this.from){e.next=5;break}return e.next=3,i["a"].getProfile();case 3:this.profile=e.sent,this.profile.pic_path||(this.profile.pic_path="/img/default_avatar.png");case 5:this.widgetData.bgcolor?this.style_call_now={background:this.widgetData.bgcolor,borderColor:this.widgetData.bgcolor,color:"white"}:setTimeout((function(){t.updateStyle("callnow")}),300);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{updateStyle:function(e){if("callnow"==e)return this.style_call_now={background:this.widgetData.bgcolor,borderColor:this.widgetData.bgcolor,color:"white"},void(this.style_call_back={borderColor:this.widgetData.bgcolor2,color:this.widgetData.bgcolor2});this.style_call_now={borderColor:this.widgetData.bgcolor,color:this.widgetData.bgcolor},this.style_call_back={background:this.widgetData.bgcolor2,borderColor:this.widgetData.bgcolor2,color:"white"}}}},o=s,l=(_("3c14"),_("2877")),c=Object(l["a"])(o,r,a,!1,null,null,null);t["default"]=c.exports},"8c65":function(e,t,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){try{return encodeURIComponent(e)}catch(t){console.error("error encode %o")}return null},a=function(e){try{return decodeURIComponent(e)}catch(t){console.error("error decode %o")}return null},n=function(e){return r(e).replace(/[\-\.\+\*]/g,"\\$&")},i={getItem:function(e){return e&&a(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+n(e)+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,_,a,n,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var s="";if(_)switch(_.constructor){case Number:s=_===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+_;break;case String:s="; expires="+_;break;case Date:s="; expires="+_.toUTCString();break;default:break}return document.cookie=[r(e),"=",r(t),s,n?"; domain="+n:"",a?"; path="+a:"",i?"; secure":""].join(""),!0},removeItem:function(e,t,_){return!!this.hasItem(e)&&(document.cookie=[r(e),"=; expires=Thu, 01 Jan 1970 00:00:00 GMT",_?"; domain="+_:"",t?"; path="+t:""].join(""),!0)},hasItem:function(e){return!!e&&new RegExp("(?:^|;\\s*)"+r(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);return e=e.map((function(e){return a(e)})),e}};t.default=i},9846:function(e,t,_){"use strict";_.r(t);var r=function(){var e=this,t=e.$createElement,_=e._self._c||t;return _("div",{class:"d-inline-block text-white line-hieght-1-2 "+("pbxplus"==e.app_name?"position-relative ml-6":"position-absolute top-68px ml-6")+"  mt-n4 opacity-0-8"},[e.connection&&"pbxplus"==e.app_name?_("div",{staticClass:"font-weight-normal font-size-14px my-1"},[e._v(e._s(e.phone_number))]):e._e(),e.connection?_("p",{staticClass:"mb-0 font-size-12px "},[e._v(e._s(this.duration))]):e._e()])},a=[],n=(_("99af"),{props:{connection:Object,phone_number:String,app_name:String},data:function(){return{duration:"",timeInterval:""}},mounted:function(){var e=this,t={day:0,hours:0,minutes:0,seconds:0},_=new Date(t.day,t.hours,t.minutes,t.seconds),r=1;this.timeInterval=setInterval((function(){_=new Date(_.getTime()+1e3*r),e.duration="".concat(_.getHours()<10?"0"+_.getHours():_.getHours()," :\n                        ").concat(_.getMinutes()<10?"0"+_.getMinutes():_.getMinutes()," :\n                        ").concat(_.getSeconds()<10?"0"+_.getSeconds():_.getSeconds())}),1e3*Math.abs(r))}}),i=n,s=_("2877"),o=Object(s["a"])(i,r,a,!1,null,null,null);t["default"]=o.exports},"9b23":function(module,__webpack_exports__,__webpack_require__){"use strict";var regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("96cf"),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0__),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("c964"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("276c"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("e954"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("920b"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("92a6"),axios__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_6__),_jwt__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("9b7b"),_core_data__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("a11a"),Call_Log="https://api.${region}.500apps.com/pbxplus/v1/call-log?app_name=pbxplus",CallLog=function(_Data){Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__["a"])(CallLog,_Data);var _super=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__["a"])(CallLog);function CallLog(){return Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__["a"])(this,CallLog),_super.apply(this,arguments)}return Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__["a"])(CallLog,[{key:"add",value:function(){var _add=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["a"])(regeneratorRuntime.mark((function _callee(form){var headers,region,url,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:return _context.next=2,_jwt__WEBPACK_IMPORTED_MODULE_7__["a"].setHeader();case 2:return headers=_context.sent,headers["x-api-key"]=form.api_key,region=this.getRegion(),url=Call_Log,url=eval("`"+url+"`"),_context.next=9,axios__WEBPACK_IMPORTED_MODULE_6___default.a.put(url,form,{headers:headers});case 9:return response=_context.sent,_context.abrupt("return",response.data);case 11:case"end":return _context.stop()}}),_callee,this)})));function add(e){return _add.apply(this,arguments)}return add}()}]),CallLog}(_core_data__WEBPACK_IMPORTED_MODULE_8__["a"]);__webpack_exports__["a"]=new CallLog},"9b7b":function(e,t,_){"use strict";_("96cf");var r=_("c964"),a=_("276c"),n=_("e954"),i=_("8c65"),s=_.n(i);function o(e){this.message=e}o.prototype=new Error,o.prototype.name="InvalidCharacterError";var l="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new o("'atob' failed: The string to be decoded is not correctly encoded.");for(var _,r,a=0,n=0,i="";r=t.charAt(n++);~r&&(_=a%4?64*_+r:r,a++%4)?i+=String.fromCharCode(255&_>>(-2*a&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return i};function c(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(l(e).replace(/(.)/g,(function(e,t){var _=t.charCodeAt(0).toString(16).toUpperCase();return _.length<2&&(_="0"+_),"%"+_})))}(t)}catch(e){return l(t)}}function u(e){this.message=e}function d(e,t){if("string"!=typeof e)throw new u("Invalid token specified");var _=!0===(t=t||{}).header?0:1;try{return JSON.parse(c(e.split(".")[_]))}catch(e){throw new u("Invalid token specified: "+e.message)}}u.prototype=new Error,u.prototype.name="InvalidTokenError";var p=d,b=function(){function e(){Object(a["a"])(this,e)}return Object(n["a"])(e,[{key:"getJWT",value:function(){var e=s.a.getItem("token")||localStorage.getItem("token");if(e)try{var t=JSON.parse(e);this.jwt_token=p(t.jwt);var _="Bearer ".concat(t.jwt);return _}catch(r){return e}}},{key:"setHeader",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getJWT();case 2:return t=e.sent,_={},_["Authorization"]=t,e.abrupt("return",_);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getJWTDecoded",value:function(){var e=this.getJWT();if(e)return p(e)}}]),e}();t["a"]=new b},b9ba:function(e,t,_){"use strict";_.r(t);var r=function(){var e=this,t=e.$createElement,_=e._self._c||t;return _("div",{class:e.theme},[_("Header",{staticClass:"visitor-btns",attrs:{widgetData:e.widgetData,domain_id:e.domain_id,from:"visitor"},on:{visitor_click:e.showCallNow}}),"call_back"!=e.visitor_select&&"connected"!=e.status?_("div",{staticClass:"height-288 d-flex justify-content-center p-3"},[_("div",{staticClass:"p-2 font-size-13px"},[e._v(e._s(e.widgetData.description))])]):e._e(),"call_back"==e.visitor_select?_("CallBack",{attrs:{call_flow_id:e.flow_id,api_key:e.api_key,domain_id:e.domain_id}}):e._e(),"call_now"==e.visitor_select?_("div",{class:"connected"==e.status?"callnow-keypad":""},["connected"==e.status?_("div",{staticClass:"width-400"},[_("b-card",{staticClass:"h-100 bg-dailer rounded-20 mb-0",attrs:{"body-class":"dailer-padding"}},["visitor"!=e.$route.params.from?_("div",{staticClass:"d-flex justify-content-center"},[_("img",{staticClass:"avatar rounded-circle mb-3",attrs:{src:"https://infinity.500apps.com/avatars/avatar-47.png"}})]):e._e(),_("Timer",{staticClass:"timer-alignment",attrs:{domain_id:e.domain_id,connection:e.connection}}),_("KeyPad",{attrs:{domain_id:e.domain_id},on:{digitPressed:e.digitPressed}})],1)],1):e._e()]):e._e(),_("div",{staticClass:"text-center d-flex justify-content-between"},["call_now"==e.visitor_select?_("b-button",{staticClass:"rounded-top-0",style:{background:"Call Now"==e.buttonName?e.widgetData.btncolor:e.widgetData.btncolor2,borderColor:"Call Now"==e.buttonName?e.widgetData.btncolor:e.widgetData.btncolor2},attrs:{disabled:!e.isTwilioReady,block:"",variant:e.variant},on:{click:e.prefer}},[_("span",{staticClass:"fe fe-phone small mr-2"}),e._v(e._s(e.buttonName)+" "),e.isTwilioReady?e._e():_("b-spinner",{attrs:{small:"",variant:"light",label:"Spinning"}})],1):e._e()],1),e._m(0)],1)},a=[function(){var e=this,t=e.$createElement,_=e._self._c||t;return _("div",{staticClass:"pbx-widget-footer"},[_("p",{staticClass:"font-size-10px d-flex align-items-center justify-content-center mb-0"},[e._v(" Powered by "),_("a",{staticClass:"ml-2 text-primary cursor-pointer",attrs:{rel:"nofollow",onclick:"window.open('http://www.pbxplus.com/', '_blank')"}},[e._v("PBXPlus")])])])}],n=(_("99af"),_("d3b7"),_("25f0"),_("96cf"),_("c964")),i=_("f3f3"),s=_("2f62"),o=_("89c7"),l=_("73c2"),c=_("9846"),u=_("2cfc"),d=_("9b23"),p=_("f086"),b={components:{CallBack:p["default"],Header:o["default"],KeyPad:l["default"],Timer:c["default"]},props:{flow_id:String,api_key:String,domain_id:String},data:function(){return{theme:"visitor preview-keypad",is_call_now:!1,status:"",connectedCall:!1,visitor_select:"",connection:"",buttonName:"Call Now",variant:"success",widgetData:{},showText:!1}},computed:Object(i["a"])({},Object(s["b"])(["isTwilioReady","device","checkDeviceStatus"])),watch:{checkDeviceStatus:function(e){"connect"===e?(this.connectedCall=!0,this.status="connected"):"disconnect"==e&&this.updateCallLog()}},mounted:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.visitor_select="call_now",e.prev=1,e.next=4,u["a"].getCapabilityVisitor(this.domain_id,this.flow_id,this.api_key);case 4:t=e.sent,this.$store.dispatch("getToken","".concat(t[0].pref_value,"?To=PBX_Guest_").concat(Math.floor(1e5*Math.random()))),this.widgetData=JSON.parse(t[0].widgets),this.theme="#12263F"==this.widgetData.color?"visitor preview-keypad widget-dark":"visitor preview-keypad",e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](1);case 12:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(){return e.apply(this,arguments)}return t}(),methods:{initiateCall:function(){this.connection=this.device.connect({callflow_id:this.flow_id,domain_id:this.domain_id,api_key:this.api_key}),this.$store.dispatch("twilioDeviceListeners"),this.twilioConnection=this.connection},digitPressed:function(e){this.twilioConnection.sendDigits(e.toString())},disconnect_call:function(){this.device.disconnectAll(),this.connectedCall=!1,this.status=""},showCallNow:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function _(){return regeneratorRuntime.wrap((function(_){while(1)switch(_.prev=_.next){case 0:if(t.visitor_select=e,"call_back"!=e){_.next=4;break}return _.next=4,t.disconnect_call();case 4:case"end":return _.stop()}}),_)})))()},prefer:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.is_call_now=!e.is_call_now,e.visitor_select="call_now",e.showText=!1,!e.is_call_now){t.next=11;break}return t.next=6,e.initiateCall();case 6:e.buttonName="Calling",e.variant="danger",e.buttonName="End Call",t.next=15;break;case 11:return t.next=13,e.disconnect_call();case 13:e.buttonName="Call Now",e.variant="success";case 15:case"end":return t.stop()}}),t)})))()},updateCallLog:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var _;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.buttonName="Call Now",e.variant="success",e.connection="",_={},_.callSid=e.twilioConnection.parameters.CallSid,_.flow_id=e.flow_id,_.api_key=e.api_key,_.domain_id=e.domain_id,d["a"].add(_);case 9:case"end":return t.stop()}}),t)})))()}}},m=b,f=(_("4dda"),_("2877")),h=Object(f["a"])(m,r,a,!1,null,"eda6f4ca",null);t["default"]=h.exports},dbb4:function(e,t,_){var r=_("23e7"),a=_("83ab"),n=_("56ef"),i=_("fc6a"),s=_("06cf"),o=_("8418");r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,_,r=i(e),a=s.f,l=n(r),c={},u=0;while(l.length>u)_=a(r,t=l[u++]),void 0!==_&&o(c,t,_);return c}})},f086:function(e,t,_){"use strict";_.r(t);var r=function(){var e=this,t=e.$createElement,_=e._self._c||t;return _("div",{staticClass:"width-400"},[_("b-card",{staticClass:"visitor-callback mb-0",attrs:{"body-class":"p-3"}},[_("b-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[_("b-form-group",{staticClass:"mb-3",attrs:{label:"Enter Name","label-for":"input-name",size:"sm"}},[_("b-form-input",{attrs:{size:"sm",type:"text",oninvalid:"this.setCustomValidity('Please enter proper name')",oninput:"this.setCustomValidity('')",id:"input-name",placeholder:"Enter Name",pattern:"[a-zA-Z ]{3,30}",required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),_("b-form-group",{staticClass:"mb-3",attrs:{label:"Enter Phone Number",size:"sm"}},[_("VueTelInput",{attrs:{required:"",size:"sm"},on:{"country-changed":e.countryChanged},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),_("b-form-group",{staticClass:"mb-3",attrs:{label:"Call Now/Schedule this later",size:"sm"}},[_("b-form-select",{staticClass:"mb-0",attrs:{size:"sm",options:e.sendType,required:""},model:{value:e.form.send_type,callback:function(t){e.$set(e.form,"send_type",t)},expression:"form.send_type"}})],1),"Scheduled"==e.form.send_type?_("b-row",[_("b-col",{attrs:{md:"12",size:"sm"}},[_("b-form-group",{staticClass:"mb-3",attrs:{label:"Callback Time",size:"sm"}},[_("b-form-input",{staticClass:"form-control pr-2",attrs:{type:"datetime-local",size:"sm",id:"callbacktime",required:""},model:{value:e.form.call_back_time,callback:function(t){e.$set(e.form,"call_back_time",t)},expression:"form.call_back_time"}})],1)],1),_("b-col",{attrs:{lg:"12"}},[_("label",{attrs:{size:"sm"}},[e._v("Timezone")]),_("b-form-select",{attrs:{size:"sm",options:e.getTimezones(),required:""},model:{value:e.form.timezone,callback:function(t){e.$set(e.form,"timezone",t)},expression:"form.timezone"}})],1)],1):e._e(),_("div",{staticClass:"d-flex justify-content-end border-top mt-3 pt-3"},[_("b-button",{attrs:{size:"sm",block:"",type:"submit",variant:"primary px-5",disabled:e.isDisabled}},[e._v("Submit")])],1),_("p",{staticClass:"mb-0 text-right mt-2 text-primary",class:e.errorClass},[e._v(e._s(e.message))])],1)],1)],1)},a=[],n=(_("caad"),_("2532"),_("96cf"),_("c964")),i=_("f62e"),s=_("2ae6"),o=_("7f45"),l=_.n(o),c={components:{VueTelInput:i["a"]},props:["domain_id","api_key","call_flow_id"],data:function(){return{form:{name:"",number:"",timezone:"",api_key:"",call_flow_id:"",domain_id:"",message:"",call_back_time:"",send_type:"Call now",country_code:""},isDisabled:!1,errorClass:"",message:"",sendType:[{value:"Call now",text:"Call now"},{value:"Scheduled",text:"Schedule later"}]}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.timezone=l.a.tz.guess();case 1:case"end":return t.stop()}}),t)})))()},methods:{countryChanged:function(e){this.form.country_code=e.dialCode},getTimezones:function(){var e=l.a.tz.names();return e.unshift({text:"Select timezone",value:""}),e},onSubmit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form.domain_id=e.domain_id,e.form.call_flow_id=e.call_flow_id,e.form.api_key=e.api_key,e.message="saving..",e.isDisabled=!1,t.prev=5,t.next=8,s["a"].add(e.form);case 8:e.message="Saved your data successfully",e.errorClass="text-primary",t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](5),t.t0.response.data.error.includes("Duplicate entry")?(e.message="Data already exists",e.errorClass="text-danger"):(e.message="Unable to save, Please try again",e.errorClass="text-danger");case 15:setTimeout((function(){e.message=""}),2e3);case 16:case"end":return t.stop()}}),t,null,[[5,12]])})))()}}},u=c,d=_("2877"),p=Object(d["a"])(u,r,a,!1,null,null,null);t["default"]=p.exports},f3f3:function(e,t,_){"use strict";_.d(t,"a",(function(){return n}));_("a4d3"),_("4de4"),_("4160"),_("e439"),_("dbb4"),_("b64b"),_("159b");var r=_("fc11");function a(e,t){var _=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),_.push.apply(_,r)}return _}function n(e){for(var t=1;t<arguments.length;t++){var _=null!=arguments[t]?arguments[t]:{};t%2?a(Object(_),!0).forEach((function(t){Object(r["a"])(e,t,_[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(_)):a(Object(_)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(_,t))}))}return e}},fc11:function(e,t,_){"use strict";function r(e,t,_){return t in e?Object.defineProperty(e,t,{value:_,enumerable:!0,configurable:!0,writable:!0}):e[t]=_,e}_.d(t,"a",(function(){return r}))}}]);
//# sourceMappingURL=ninjacapture36.6a01d724.js.map