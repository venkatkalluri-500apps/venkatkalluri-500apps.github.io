(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ninjacapture100"],{"0d33":function(e,t,s){"use strict";s("99af");var n=s("276c"),r=s("e954"),a=s("920b"),i=s("92a6"),c=s("a11a"),u="https://api.${region}.500apps.com/mailsend/v1/unsubscribe/",o="https://api.${region}.500apps.com/mailsend/v1/unsubscribe/reason",b="https://api.${region}.500apps.com/mailsend/v1/contacts/",l=function(e){Object(a["a"])(s,e);var t=Object(i["a"])(s);function s(){return Object(n["a"])(this,s),t.apply(this,arguments)}return Object(r["a"])(s,[{key:"getUnsubscribe",value:function(e,t){var s=u+"".concat(e,"/").concat(t),n=new c["a"](s);return n.get()}},{key:"editUnsubscribe",value:function(e){var t=u+e,s=new c["a"](t);return s.get()}},{key:"getContacts",value:function(e){var t=b+e,s=new c["a"](t);return s.get()}},{key:"editUnsubscribeReason",value:function(e,t,s){var n=o+e,r=new c["a"](n);return r.disablePCors(),r.edit(s,t)}}]),s}(c["a"]);t["a"]=new l},2799:function(e,t,s){"use strict";s("d263")},bbd3:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return"unSubscribedReason"==e.unsubscribe_status?s("div",[s("b-container",[s("b-row",[s("b-col",{staticClass:"mx-auto",attrs:{md:"7"}},[s("div",{staticClass:"d-flex align-items-center py-4"},[e.unsubscribe_form.logo_url?s("b-img",{attrs:{src:e.unsubscribe_form.logo_url,alt:"logo",height:"40"}}):e._e(),s("h2",{staticClass:"mb-0 ml-2 brand-heading"},[e._v(e._s(e.unsubscribe_form.company_name))])],1),s("b-card",{attrs:{"body-class":"p-45"}},[s("h1",{staticClass:"mb-2"},[e._v("You have been successfully unsubscribed")]),s("div",{staticClass:"mb-3 font-size-lg"},[s("p",{staticClass:"mb-0"},[e._v("You will no longer receive emails from us")])]),e.isUnsubscribed?s("div",{staticClass:"mt-4"},[s("h3",{staticClass:"mb-3 pb-1"},[e._v("Please let us know why you unsubscribed?")]),s("b-form",{staticClass:"radio-group-mb-4",on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[e.options.length>=1?e._e():s("b-form-textarea",{staticClass:"mb-4 mt-3",attrs:{type:"text",required:"",placeholder:"Enter Unsubscribe reason"},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}}),s("b-form-radio-group",{attrs:{stacked:"",options:e.options,required:""},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}}),"Other"==e.form.reason?s("b-form-textarea",{staticClass:"mb-4 mt-3",attrs:{type:"text",required:"",placeholder:"Enter Unsubscribe reason"},model:{value:e.unsubReason,callback:function(t){e.unsubReason=t},expression:"unsubReason"}}):e._e(),s("div",{staticClass:"d-flex justify-content-between align-items-center"},[e.unsubscribe_form.redirect_url?s("div",[s("b-link",{attrs:{href:e.unsubscribe_form.redirect_url,target:"_blank"}},[e._v("Home")])],1):e._e(),s("b-button",{staticClass:"px-4 ml-auto",attrs:{variant:"primary",type:"submit"}},[e._v(" Submit "),e.clicked?s("b-spinner",{attrs:{variant:"white",small:"",label:"Spinning"}}):e._e()],1)],1)],1),s("div",[e.show_message?s("p",{staticClass:"float-right mt-4 text-danger"},[e._v(e._s(e.message))]):e._e()])],1):e._e()])],1)],1)],1)],1):"unSubscribed"==e.unsubscribe_status?s("div",[s("b-container",[s("b-row",[s("b-col",{staticClass:"mx-auto mt-5",attrs:{md:"7"}},[s("div",{staticClass:"d-flex align-items-center py-4"},[e.unsubscribe_form.logo_url?s("b-img",{attrs:{src:e.unsubscribe_form.logo_url,alt:"logo",height:"40"}}):e._e(),s("h2",{staticClass:"mb-0 ml-2 brand-heading"},[e._v(e._s(e.unsubscribe_form.company_name))])],1),s("b-card",{attrs:{"body-class":"p-45"}},[s("h1",{staticClass:"mb-2"},[e._v("Already you have been unsubscribed")]),s("div",{staticClass:"mb-3 font-size-lg"},[s("p",{staticClass:"mb-0"},[e._v("You will no longer receive emails from us")])])])],1)],1)],1)],1):e._e()},r=[],a=(s("99af"),s("d81d"),s("96cf"),s("c964")),i=s("0d33"),c={name:"Unsubscribe",components:{},data:function(){return{isUnsubscribed:!0,message:"",show_message:!1,unsubscribe_data:"",options:[],domain_id:"",unsubReason:"",user_id:"",contact_id:"",contact_data:{},unsubscribe_status:"",return_url:!1,form:{reason:""},newsletter_stat_id:"",newsletter_id:"",unsubscribe_form:{company_name:"",logo_url:null,redirect_url:""},clicked:!1,query:"",project_id:""}},mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.domain_id=window.domain,this.project_id=window.user,this.contact_id=this.$route.params.contact_id,this.newsletter_id=this.$route.params.newsletter_id,this.newsletter_stat_id=this.$route.params.newsletter_stat_id,this.query=this.$route.query.t,e.next=8,this.saveUnsubscribeStatus();case 8:return e.next=10,i["a"].getUnsubscribe(this.domain_id,this.project_id);case 10:return this.unsubscribe_data=e.sent,this.unsubscribe_form.company_name=this.unsubscribe_data[0].company_name,this.unsubscribe_form.logo_url=this.unsubscribe_data[0].logo_url,this.unsubscribe_form.redirect_url=this.unsubscribe_data[0].redirect_url,this.unsubscribe_data[0].unsubscribe_reasons=JSON.parse(this.unsubscribe_data[0].unsubscribe_reasons),this.unsubscribe_data[0].unsubscribe_reasons.length>=1&&(this.unsubscribe_data[0].unsubscribe_reasons.map((function(e){t.options.push({text:e.unsubscribe_reason,value:e.unsubscribe_reason})})),this.options.push({text:"Other",value:"Other"})),e.next=18,this.getContacts();case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{saveUnsubscribeStatus:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i["a"].editUnsubscribe("".concat(e.domain_id,"/").concat(e.contact_id,"/").concat(e.newsletter_id,"/").concat(e.newsletter_stat_id,"/").concat(e.project_id,"?reason=unsubscribe&t=").concat(e.query));case 3:s=t.sent,console.log("Response",s),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getContacts:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].getContacts("".concat(e.domain_id,"/").concat(e.contact_id,"/is-subscribed"));case 2:e.contact_data=t.sent,1==e.contact_data.Status?(e.unsubscribe_status="unSubscribed",e.unsubscribe_form.redirect_url&&setTimeout((function(){window.location.href=e.unsubscribe_form.redirect_url}),1e3)):e.unsubscribe_status="unSubscribedReason";case 4:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.clicked=!0,"Other"==e.form.reason&&(e.form.reason=e.unsubReason),t.prev=2,t.next=5,i["a"].editUnsubscribeReason("/".concat(e.domain_id,"/").concat(e.contact_id),e.form,e.contact_id);case 5:e.clicked=!1,e.isUnsubscribed=!1,e.unsubscribe_form.redirect_url&&setTimeout((function(){window.location.href=e.unsubscribe_form.redirect_url}),1e3),t.next=16;break;case 10:t.prev=10,t.t0=t["catch"](2),e.show_message=!0,e.message="Something went wrong try again.",console.log(t.t0),e.clicked=!1;case 16:setTimeout((function(){e.message="",e.show_message=!1}),5e3);case 17:case"end":return t.stop()}}),t,null,[[2,10]])})))()}}},u=c,o=(s("2799"),s("2877")),b=Object(o["a"])(u,n,r,!1,null,null,null);t["default"]=b.exports},d263:function(e,t,s){},d81d:function(e,t,s){"use strict";var n=s("23e7"),r=s("b727").map,a=s("1dde"),i=s("ae40"),c=a("map"),u=i("map");n({target:"Array",proto:!0,forced:!c||!u},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=ninjacapture100.f9a00241.js.map