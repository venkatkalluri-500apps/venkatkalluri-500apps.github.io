(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ninjacapture146"],{"0e46":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"user-details",attrs:{id:"user-details"}},[a("div",{staticClass:"d-flex align-items-center step-header font-size-16px"},[a("div",{staticClass:"circle-bg mr-2 mb-0 bg-primary"},[e.loading?a("i",{staticClass:"fe fe-check"}):a("span",[e._v("3")])]),a("h4",{staticClass:"mb-0 step-heading line-height-1"},[e._v("Enter your details to book an appointment")])]),a("div",[a("b-form",[a("b-row",{staticClass:"px-2 pt-2"},[a("b-col",{attrs:{md:"6"}},[a("b-form-group",{staticClass:"mb-3 pb-1"},[a("label",{staticClass:"mb-1"},[e._v("Name"),a("span",{staticClass:"text-danger font-weight-bold"},[e._v("*")])]),a("b-form-input",{attrs:{type:"text",name:"name",placeholder:"Enter Name",required:"",autocomplete:"name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),1!=e.validate||e.form.name?e._e():a("p",{staticClass:"text-danger pt-1 small mb-0"},[e._v("Name field is required")])],1),a("b-form-group",{staticClass:"mb-3 pb-1"},[a("label",{staticClass:"mb-1"},[e._v("Email"),a("span",{staticClass:"text-danger font-weight-bold"},[e._v("*")])]),a("b-form-input",{attrs:{type:"email",name:"email",placeholder:"Enter Email",required:"",autocomplete:"email"},on:{input:e.validateEmail},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),1!=e.validate||e.form.email?e._e():a("p",{staticClass:"text-danger pt-1 mb-0 small"},[e._v("Email field is required")]),1==e.invalidEmail&&e.form.email.length>0?a("p",{staticClass:"text-danger pt-1 mb-0 small"},[e._v("Please enter valid email")]):e._e()],1),a("b-form-group",{staticClass:"mb-3 pb-1"},[a("label",{staticClass:"mb-1"},[e._v(" Phone "),"Phone call"==e.eventData.eventDetails[0].location&&"invitee_call"==e.eventLocation.location_address?a("span",{staticClass:"text-danger font-weight-bold"},[e._v("*")]):e._e()]),a("VueTelInput",{attrs:{type:"tel",name:"telephone",mode:"international",autocomplete:"tel"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),"Phone call"!=e.eventData.eventDetails[0].location||"invitee_call"!=e.eventLocation.location_address||1!=e.validate||e.form.phone?e._e():a("p",{staticClass:"text-danger mb-0 pt-1 small"},["Phone call"==e.eventData.eventDetails[0].location&&"invitee_call"==e.eventLocation.location_address&&!e.form.phone&&e.invalidPhone?a("small",[e._v("Phone field is required")]):e._e()])],1)],1),a("b-col",{attrs:{md:"6"}},[a("b-form-group",{attrs:{label:"Notes","label-class":"pb-0 mb-1"}},[a("b-form-textarea",{attrs:{type:"textarea",rows:"8",placeholder:"Enter Notes",autocomplete:"street-address"},model:{value:e.form.notes,callback:function(t){e.$set(e.form,"notes",t)},expression:"form.notes"}})],1)],1),e._l(e.customFields,(function(t){return a("b-col",{key:t.index,staticClass:"mb-3 pb-2",attrs:{md:"6"}},["Textarea"==t.type?a("span",[a("label",{staticClass:"mb-1"},[e._v(e._s(t.name)+" "),t.mandatory?a("span",{staticClass:"text-danger font-weight-bold"},[e._v("*")]):e._e()]),a("b-form-textarea",{attrs:{placeholder:t.placeholder,required:t.mandatory},on:{input:function(a){return e.validateCustom(t.name)}},model:{value:e.form[t.name.replace(/ /g,"")],callback:function(a){e.$set(e.form,t.name.replace(/ /g,""),a)},expression:"form[item.name.replace(/ /g, '')]"}}),e.validate_custom&&t.mandatory&&!e.form[t.name.replace(/ /g,"")]?a("p",{staticClass:"text-danger pr-5 mb-0 pt-1"},[a("small",[e._v(e._s(t.name)+" field is required")])]):e._e()],1):e._e(),"Text"==t.type?a("span",[a("label",{staticClass:"mb-1"},[e._v(e._s(t.name)),t.mandatory?a("span",{staticClass:"text-danger font-weight-bold"},[e._v("*")]):e._e()]),a("b-form-input",{attrs:{placeholder:t.placeholder,required:t.mandatory},model:{value:e.form[t.name.replace(/ /g,"")],callback:function(a){e.$set(e.form,t.name.replace(/ /g,""),a)},expression:"form[item.name.replace(/ /g, '')]"}}),1==e.validate&&t.mandatory&&!e.form[t.name.replace(/ /g,"")]?a("p",{staticClass:"text-danger pr-5 mb-0 pt-1"},[a("small",[e._v(e._s(t.name)+" field is required")])]):e._e()],1):e._e(),"Date"==t.type?a("span",[a("label",{staticClass:"mb-1"},[e._v(e._s(t.date)),t.mandatory?a("span",{staticClass:"text-danger font-weight-bold"},[e._v("*")]):e._e()]),a("b-form-input",{attrs:{placeholder:t.date,required:t.mandatory},model:{value:e.form[t.date.replace(/ /g,"")],callback:function(a){e.$set(e.form,t.date.replace(/ /g,""),a)},expression:"form[item.date.replace(/ /g, '')]"}}),1==e.validate&&t.mandatory&&!e.form[t.date.replace(/ /g,"")]?a("p",{staticClass:"text-danger pr-5 mb-0 pt-1"},[a("small",[e._v(e._s(t.name)+" field is required")])]):e._e()],1):e._e(),"Number"==t.type?a("span",[a("label",{staticClass:"mb-1"},[e._v(e._s(t.name)),t.mandatory?a("span",{staticClass:"text-danger font-weight-bold"},[e._v("*")]):e._e()]),a("b-form-input",{attrs:{type:"number",placeholder:t.placeholder,required:t.mandatory},model:{value:e.form[t.name.replace(/ /g,"")],callback:function(a){e.$set(e.form,t.name.replace(/ /g,""),a)},expression:"form[item.name.replace(/ /g, '')]"}}),1==e.validate&&t.mandatory&&!e.form[t.name.replace(/ /g,"")]?a("p",{staticClass:"text-danger pr-5 mb-0 pt-1"},[a("small",[e._v(e._s(t.name)+" field is required")])]):e._e()],1):e._e()])}))],2)],1),a("b-row",[a("b-col",{attrs:{md:"12"}},[a("div",{staticClass:"d-flex justify-content-end border-thin-top mt-3 pt-4"},[a("b-button",{staticClass:"btn px-5 py-2",attrs:{size:"sm",variant:"primary"},on:{click:e.onSubmit}},[e._v(" Submit "),e.loading?a("b-spinner",{staticClass:"ml-1",attrs:{small:"",label:"Loading..."}}):e._e()],1)],1)])],1),a("b-modal",{ref:"slotTimeUp",attrs:{"dialog-class":"max-width-400px","hide-header":"","hide-footer":"",size:"sm"}},[a("div",{staticClass:"alert alert-warning mb-0 p-4"},[a("h4",{staticClass:"text-center"},[e._v("Sorry, that time slot is no longer available.")]),a("p",{staticClass:"my-2 text-center"},[e._v("Please select another available time slot")]),a("b-button",{staticClass:"btn-sm mt-4 px-4 py-2 text-center d-flex mx-auto",attrs:{variant:"primary"},on:{click:e.showSlots}},[e._v("View Slots")])],1)])],1)])},r=[],i=(a("a4d3"),a("e01a"),a("99af"),a("4de4"),a("d81d"),a("b0c0"),a("a9e3"),a("b64b"),a("ac1f"),a("5319"),a("498a"),a("96cf"),a("c964")),o=a("c1df"),s=a.n(o),l=a("7eaf"),_=a("f62e"),c={name:"BookSlot",components:{VueTelInput:_["a"]},props:{eventData:Object,userData:Object,projectId:Number},data:function(){return{form:{email:"",name:"",phone:null},validate:!1,domainId:"",customFields:[],loading:!1,validate_custom:!1,eventLocation:{},invalidEmail:0,invalidPhone:0}},mounted:function(){var e=this;this.eventLocation=JSON.parse(this.eventData.eventDetails[0].location_info),this.domainId=window.domain,this.$refs["user-details"].scrollIntoView(),this.customFields=JSON.parse(this.eventData.eventDetails[0].custom_fields),null!=this.customFields?this.customFields.map((function(t){e.form[t.name.replace(/ /g,"")]=""})):this.customFields=[]},methods:{onSubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i,o,_,c,m,d,u,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("Phone call"!=e.eventData.eventDetails[0].location||"invitee_call"!=e.eventLocation.location_address||e.form.phone?e.invalidPhone=0:e.invalidPhone=1,a=new Date(s()().tz(e.eventData.deviceTimezone).format("YYYY-MM-DD HH:mm")),n=JSON.parse(e.eventData.eventDetails[0].event_min_notice),n&&parseInt(n.dataofmin_notice[1])>0&&("days"==n.dataofmin_notice[0]?a.setDate(a.getDate()+parseInt(n.dataofmin_notice[1])):"hours"==n.dataofmin_notice[0]?a.setHours(a.getHours()+parseInt(n.dataofmin_notice[1])):"minutes"==n.dataofmin_notice[0]&&a.setMinutes(a.getMinutes()+parseInt(n.dataofmin_notice[1]))),r="one to one"==e.eventData.eventDetails[0].category?1:e.eventData.eventDetails[0].slot_limit,i=new Date(s()(1e3*e.eventData.time.start_unix).tz(e.eventData.deviceTimezone).format("YYYY-MM-DD HH:mm")),o=!0,null!=e.customFields&&e.customFields.map((function(t){t.mandatory&&""==e.form[t.name.replace(/ /g,"")].trim()&&(o=!1)})),_=!1,_="Phone call"!=e.eventData.eventDetails[0].location||"invitee_call"!=e.eventLocation.location_address||null!=e.form.phone,!(a.getTime()<i.getTime())){t.next=37;break}if(!(e.form.name.trim()&&e.form.email.trim()&&o&&_)||e.invalidEmail||e.invalidPhone){t.next=33;break}return e.validate=!1,e.validate_custom=!1,e.loading=!0,c={title:e.eventData.eventDetails[0].title,event_type_id:e.eventData.eventDetails[0].id,duration:e.eventData.eventDetails[0].duration,description:decodeURI(e.eventData.eventDetails[0].description),time_zone:e.eventData.eventDetails[0].timezone,mail_start_time:e.timeFormatter(e.eventData.time.start_unix,e.eventData.eventDetails[0].timezone,"llll"),mail_end_time:e.timeFormatter(e.eventData.time.end_unix,e.eventData.eventDetails[0].timezone,"LT"),start_date:new Date(1e3*e.eventData.time.start_unix).toISOString(),end_date:new Date(1e3*e.eventData.time.end_unix).toISOString(),start_time:e.timeFormatter(e.eventData.time.start_unix,e.eventData.eventDetails[0].timezone,"YYYY-MM-DD HH:mm:ss"),end_time:e.timeFormatter(e.eventData.time.end_unix,e.eventData.eventDetails[0].timezone,"YYYY-MM-DD HH:mm:ss"),status:"scheduled",location:e.eventData.eventDetails[0].location,location_info:e.eventData.eventDetails[0].location_info,project_id:e.projectId},m={name:e.form.name,email:e.form.email,custom_fields:"",project_id:e.projectId},e.eventData.eventDetails[0].share_event&&e.eventData.eventDetails[0].share_event.length&&(d=JSON.parse(e.eventData.eventDetails[0].share_event),c.cc="",d.filter((function(e,t){return c.cc+=t==d.length-1?e:e+","}))),Object.keys(e.form).length>0?m.custom_fields=JSON.stringify(e.form):m.custom_fields="",u={events:c,events_participants:m,time_zone:e.eventData.deviceTimezone,unix_times:e.eventData.time},t.prev=20,t.next=23,l["a"].add("".concat(e.domainId,"/").concat(e.userData.id,"/events?max_limit=").concat(r),u);case 23:p=t.sent,p?(e.loading=!1,e.$parent.$parent.$parent.$emit("bookSlotConfirmed",!0,e.userData.name,u,p)):e.loading=!1,t.next=31;break;case 27:t.prev=27,t.t0=t["catch"](20),e.loading=!1,e.$refs.slotTimeUp.show();case 31:t.next=35;break;case 33:e.validate=!0,e.validate_custom=!0;case 35:t.next=38;break;case 37:e.$refs.slotTimeUp.show();case 38:case"end":return t.stop()}}),t,null,[[20,27]])})))()},timeFormatter:function(e,t,a){return s.a.utc(s()(1e3*e),"YYYY-MM-DD HH").tz(t).format(a)},showSlots:function(){this.$refs.slotTimeUp.hide(),this.$emit("showSlots")},validateCustom:function(e){""==this.form[e.replace(/ /g,"")].trim()?this.validate_custom=!0:this.validate_custom=!1},epochConverter:function(){return s()(1e3*this.eventData.time.start_unix).tz(this.eventData.deviceTimezone).format("lll")},validateEmail:function(e){var t=/^([A-Za-z0-9_+-.]{0,80})@[^-][A-Za-z0-9-]+(\.[A-Za-z0-9-]+)*(\.[A-Za-z]{2,})$/;this.invalidEmail=0,t.test(e)||(this.invalidEmail=1)}}},m=c,d=(a("9c4a"),a("2877")),u=Object(d["a"])(m,n,r,!1,null,null,null);t["default"]=u.exports},"498a":function(e,t,a){"use strict";var n=a("23e7"),r=a("58a8").trim,i=a("c8d2");n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return r(this)}})},"4de4":function(e,t,a){"use strict";var n=a("23e7"),r=a("b727").filter,i=a("1dde"),o=a("ae40"),s=i("filter"),l=o("filter");n({target:"Array",proto:!0,forced:!s||!l},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var n=a("1d80"),r=a("5899"),i="["+r+"]",o=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),l=function(e){return function(t){var a=String(n(t));return 1&e&&(a=a.replace(o,"")),2&e&&(a=a.replace(s,"")),a}};e.exports={start:l(1),end:l(2),trim:l(3)}},6430:function(e,t,a){},7156:function(e,t,a){var n=a("861d"),r=a("d2bb");e.exports=function(e,t,a){var i,o;return r&&"function"==typeof(i=t.constructor)&&i!==a&&n(o=i.prototype)&&o!==a.prototype&&r(e,o),e}},"7eaf":function(module,__webpack_exports__,__webpack_require__){"use strict";var regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("96cf"),regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0__),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("c964"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("276c"),_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("e954"),_js_core_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("a11a"),Schedulely_Server="https://api.${region}.500apps.com/schedulely/v1/",Shortcut_Server="https://api.500apps.com/shortcuts/shortcut",Shortcut_Region_Server="https://api.${region}.500apps.com/shortcuts/shortcut",Schedulely=function(){function Schedulely(){Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__["a"])(this,Schedulely)}return Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__["a"])(Schedulely,[{key:"get",value:function get(params){var region=window.region,url=eval("`"+" ".concat(Schedulely_Server+params)+"`"),data=new _js_core_data__WEBPACK_IMPORTED_MODULE_4__["a"](url);return data.disablePCors(),data.get()}},{key:"add",value:function add(params,form){var region=window.region,url=eval("`"+" ".concat(Schedulely_Server+params)+"`"),data=new _js_core_data__WEBPACK_IMPORTED_MODULE_4__["a"](url);return data.disablePCors(),data.multi_call(form)}},{key:"edit",value:function edit(id,params,form){var region=window.region,url=eval("`"+" ".concat(Schedulely_Server+params)+"`"),data=new _js_core_data__WEBPACK_IMPORTED_MODULE_4__["a"](url);return data.disablePCors(),data.edit(id,form)}},{key:"get_agents",value:function get_agents(region,params){var url="";url=eval("`"+" ".concat(Schedulely_Server+params)+"`");var data=new _js_core_data__WEBPACK_IMPORTED_MODULE_4__["a"](url);return data.disablePCors(),data.get()}},{key:"getShortcutData",value:function(){var _getShortcutData=Object(_home_agile_Desktop_Public_infinity_public_2_node_modules_vue_babel_preset_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["a"])(regeneratorRuntime.mark((function _callee(name){var url,data;return regeneratorRuntime.wrap((function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:return url=!window.region||"dev"!=window.region&&"qa"!=window.region?eval("`"+" ".concat(Shortcut_Server,"/").concat(name)+"`"):eval("`"+" ".concat(Shortcut_Region_Server,"/").concat(name)+"`"),data=new _js_core_data__WEBPACK_IMPORTED_MODULE_4__["a"](url),data.disablePCors(),_context.abrupt("return",data.get());case 4:case"end":return _context.stop()}}),_callee)})));function getShortcutData(e){return _getShortcutData.apply(this,arguments)}return getShortcutData}()}]),Schedulely}();__webpack_exports__["a"]=new Schedulely},"9c4a":function(e,t,a){"use strict";a("6430")},a9e3:function(e,t,a){"use strict";var n=a("83ab"),r=a("da84"),i=a("94ca"),o=a("6eeb"),s=a("5135"),l=a("c6b6"),_=a("7156"),c=a("c04e"),m=a("d039"),d=a("7c73"),u=a("241c").f,p=a("06cf").f,v=a("9bf2").f,f=a("58a8").trim,b="Number",h=r[b],g=h.prototype,D=l(d(g))==b,x=function(e){var t,a,n,r,i,o,s,l,_=c(e,!1);if("string"==typeof _&&_.length>2)if(_=f(_),t=_.charCodeAt(0),43===t||45===t){if(a=_.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(_.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+_}for(i=_.slice(2),o=i.length,s=0;s<o;s++)if(l=i.charCodeAt(s),l<48||l>r)return NaN;return parseInt(i,n)}return+_};if(i(b,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var E,C=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof C&&(D?m((function(){g.valueOf.call(a)})):l(a)!=b)?_(new h(x(t)),a,C):x(t)},y=n?u(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),w=0;y.length>w;w++)s(h,E=y[w])&&!s(C,E)&&v(C,E,p(h,E));C.prototype=g,g.constructor=C,o(r,b,C)}},c8d2:function(e,t,a){var n=a("d039"),r=a("5899"),i="​᠎";e.exports=function(e){return n((function(){return!!r[e]()||i[e]()!=i||r[e].name!==e}))}},d81d:function(e,t,a){"use strict";var n=a("23e7"),r=a("b727").map,i=a("1dde"),o=a("ae40"),s=i("map"),l=o("map");n({target:"Array",proto:!0,forced:!s||!l},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=ninjacapture146.24271d56.js.map